.\" Man page generated from reStructuredText.
.
.
.nr rst2man-indent-level 0
.
.de1 rstReportMargin
\\$1 \\n[an-margin]
level \\n[rst2man-indent-level]
level margin: \\n[rst2man-indent\\n[rst2man-indent-level]]
-
\\n[rst2man-indent0]
\\n[rst2man-indent1]
\\n[rst2man-indent2]
..
.de1 INDENT
.\" .rstReportMargin pre:
. RS \\$1
. nr rst2man-indent\\n[rst2man-indent-level] \\n[an-margin]
. nr rst2man-indent-level +1
.\" .rstReportMargin post:
..
.de UNINDENT
. RE
.\" indent \\n[an-margin]
.\" old: \\n[rst2man-indent\\n[rst2man-indent-level]]
.nr rst2man-indent-level -1
.\" new: \\n[rst2man-indent\\n[rst2man-indent-level]]
.in \\n[rst2man-indent\\n[rst2man-indent-level]]u
..
.TH "SCART" "1" "Jan 18, 2024" "6.1.2" "SeisComP"
.SH NAME
scart \- SeisComP Documentation
.sp
\fBImport/export MiniSEED data to/from SDS archives.\fP
.SH DESCRIPTION
.sp
The archive tool scart reads and writes \fI\%SDS\fP archives and files
in miniSEED format and checks miniSEED archives or prints stream information.
.INDENT 0.0
.IP \(bu 2
\fBDump mode:\fP Create miniSEED files (multiplexed), e.g. for playbacks, from
\fI\%SDS\fP structured data (e.g. created by slarchive).
.IP \(bu 2
\fBDump mode:\fP Play back records directly out of an SDS structure.
.IP \(bu 2
\fBImport mode:\fP Import multiplexed miniSEED files into a local SDS waveform
archive.
.IP \(bu 2
\fBImport mode:\fP Import data using the \fI\%RecordStream\fP interface
into a local SDS waveform archive.
.IP \(bu 2
\fBImport mode:\fP Read data from any \fI\%RecordStream\fP interface
and dump it to file.
.IP \(bu 2
\fBCheck mode:\fP Check an archive of miniSEED files for out\-of\-order records in
files.
.UNINDENT
.sp
\fBWARNING:\fP
.INDENT 0.0
.INDENT 3.5
.INDENT 0.0
.IP \(bu 2
When creating \fI\%SDS\fP archives, scart simply appends the new records to
existing ones. Multiple imports of the same data result in duplication.
.IP \(bu 2
Out\-of\-order imports of waveforms into a SDS archive result in out\-of\-order
records which may not be processed. Clean your archive using \fI\%scmssort\fP\&.
.IP \(bu 2
\fBBefore importing miniSEED data\fP into an SDS archive they must be sorted
by time and duplicate records must be removed. Otherwise, the SDS archive
may not be correctly readable by other modules. Therefore, combine scart
with \fI\%scmssort\fP for multiplexing and removal of duplicates.
.UNINDENT
.UNINDENT
.UNINDENT
.sp
\fBHINT:\fP
.INDENT 0.0
.INDENT 3.5
In dump and import mode output streams may be filtered by
.INDENT 0.0
.IP \(bu 2
Time windows (\fB\-t\fP),
.IP \(bu 2
Network\-station\-location\-channel (NSLC) lists (\fB\-\-nslc\fP) created,
e.g., with
.INDENT 2.0
.IP \(bu 2
\fI\%scinv\fP from inventories,
.IP \(bu 2
\fI\%scdumpcfg\fP from bindings configuration,
.IP \(bu 2
scart itself from other miniSEED files or achives.
.UNINDENT
.UNINDENT
.sp
In dump mode output streams may also be filtered by
.INDENT 0.0
.IP \(bu 2
Time window \- stream lists (\fB\-\-list\fP, dump mode) generated by
\fI\%scevtstreams\fP for particular events.
.UNINDENT
.UNINDENT
.UNINDENT
.SH CONFIGURATION
.sp
scart can make use of \fI\%RecordStream\fP implementations which are
provided by additional plugins. For loading additional plugins, e.g. the \fIxyz\fP
plugin create and configure \fBscart.cfg\fP:
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
plugins = xyz
.ft P
.fi
.UNINDENT
.UNINDENT
.SH EXAMPLES
.sp
\fBHINT:\fP
.INDENT 0.0
.INDENT 3.5
The usage of wildcards in place of network, station, location or channel code
is allowed in many options (\fB\-n\fP, \fB\-c\fP, \fB\-l\fP,
\fB\-\-list\fP, \fB\-\-nslc\fP) and follows these rules:
.INDENT 0.0
.IP \(bu 2
Import mode: the wildcards are passed to the \fI\%RecordStream\fP interface,
that interprets them. Normally both \(dq*\(dq and \(dq?\(dq are supported by RecordStreams.
.IP \(bu 2
Dump mode: the wildcards are interpreted by scart command that supports \(dq*\(dq for
network, station, location codes and \(dq*\(dq, \(dq?\(dq, \(dq(\(dq, \(dq)\(dq, \(dq|\(dq for channel code.
.UNINDENT
.UNINDENT
.UNINDENT
.INDENT 0.0
.IP 1. 3
Extract data from the default \fI\%SDS\fP archive in \fB$SEISCOMP_ROOT/var/lib/archive\fP
or from a local \fI\%SDS\fP archive [SDS archive] into a miniSEED file \fBfile.mseed\fP
and sort by end time of the records:
.INDENT 3.0
.INDENT 3.5
.sp
.nf
.ft C
scart \-dsvE \-t \(aq[start\-time]~[end\-time]\(aq [SDS archive] > [file.mseed]
scart \-dsvE \-t \(aq[start\-time]~[end\-time]\(aq > file.mseed
scart \-dsvE \-t \(aq[start\-time]~[end\-time]\(aq \-n \(aq[NET1],[NET2]\(aq > file.mseed
scart \-dsvE \-t \(aq[start\-time]~[end\-time]\(aq \-n \(aq[NET]\(aq \-c \(aq(E,H)H(1,2,3)\(aq > file.mseed
scart \-dsvE \-t \(aq[start\-time]~[end\-time]\(aq \-n \(aq[N1.S1.L1.C1],[N2.S2.L2.C2]\(aq > file.mseed
scart \-dsvE \-t \(aq[start\-time]~[end\-time]\(aq \-\-nslc list.file > file.mseed
scart \-dsvE \-t \-\-list list.file > file.mseed
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
It is possible to achieve the same result of the dump mode using a
combination of the input mode and the \fI\%scmssort\fP command, which allows
to read the input data from any supported \fI\%RecordStream\fP,
not only an SDS archive:
.INDENT 3.0
.INDENT 3.5
.sp
.nf
.ft C
scart \-I [record\-stream] \-\-list list.file \-\-stdout | scmssort \-u \-E \-v > file.mseed
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
\fBNOTE:\fP
.INDENT 3.0
.INDENT 3.5
Sorting data is computational expensive but required for waveform playbacks.
.UNINDENT
.UNINDENT
.IP 2. 3
Push miniSEED data from file \fBfile.mseed\fP or standard input
(stdin) into a local \fI\%SDS\fP archive or a file. Additionally, you may
check if the records of archived files are correctly ordered, filter by time
and/or with NSLC list and print the output streams:
.INDENT 3.0
.INDENT 3.5
.sp
.nf
.ft C
scmssort \-u \-E [file.mseed] > sorted.mseed
scart \-I sorted.mseed \-\-with\-filecheck [SDS archive]

scart \-I [file.mseed] \-t \(aq[start\-time]~[end\-time]\(aq \-\-print\-streams \-\-nslc list.file \-o [out.mseed]

cat sorted.mseed | scart \-I \- [SDS archive]
cat sorted.mseed | scart [SDS archive]
.ft P
.fi
.UNINDENT
.UNINDENT
.IP 3. 3
Collect data using the \fI\%RecordStream\fP interface (e.g. FDSNWS server)
and write to a miniSEED file or import it into a local \fI\%SDS\fP archive. The
data streams and the time spans can be defined in several ways. The data streams
(\fB\-\-list\fP) can be automatically generated, e.g., by \fI\%scevtstreams\fP\&.
.INDENT 3.0
.INDENT 3.5
.sp
.nf
.ft C
scart \-I fdsnws://[server]:80 \-\-list list.file [SDS archive]
scart \-I fdsnws://[server]:80 \-\-list list.file \-o file.mseed
scart \-I fdsnws://[server]:80 \-t \(aq[start\-time]~[end\-time]\(aq \-\-nslc list.file [SDS archive]
scart \-I fdsnws://[server]:80 \-t \(aq[start\-time]~[end\-time]\(aq \-n \(aq[NET1],[NET2]\(aq [SDS archive]
scart \-I fdsnws://[server]:80 \-t \(aq[start\-time]~[end\-time]\(aq \-n \(aq[NET]\(aq \-c \(aqEH?\(aq [SDS archive]
scart \-I fdsnws://[server]:80 \-t \(aq[start\-time]~[end\-time]\(aq \-n \(aq[N1.S1.L1.C1],[N2.S2.L2.C2]\(aq [SDS archive]
.ft P
.fi
.UNINDENT
.UNINDENT
.IP 4. 3
Check all files of an SDS archive or other directory structure for
miniSEED files with out\-of\-order records:
.INDENT 3.0
.INDENT 3.5
.sp
.nf
.ft C
scart \-\-check [archive]
.ft P
.fi
.UNINDENT
.UNINDENT
.IP 5. 3
Print stream information from miniSEED files in archives or from
\fI\%RecordStream\fP without actually writing miniSEED data. In dump and
import mode use the \fB\-\-test\fP if miniSEED data shall be read but not
written.
.INDENT 3.0
.INDENT 3.5
.sp
.nf
.ft C
scart \-\-print\-streams \-I [miniSEED file] \-\-test
scart \-\-print\-streams \-d \-t [time span] \-\-test [SDS archive]
scart \-\-print\-streams \-\-check [archive]
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
The output looks like this:
.INDENT 3.0
.INDENT 3.5
.sp
.nf
.ft C
# streamID       start                       end                         records samples samplingRate
GE.RGN..BHZ      2022\-12\-08T15:34:41.895Z    2022\-12\-08T15:52:19.145Z    58 21145 20.0
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
where the header and the text body are printed to stderr.
.UNINDENT
.SH COMMAND-LINE OPTIONS
.sp
\fBscart [options] {archive\-dir}\fP
.sp
The last option has to be the archive directory when dump mode is enabled.
When no archive directory is explicitly given,
$SEISCOMP_ROOT/var/lib/archive or the current directory
is used depending on whether $SEISCOMP_ROOT has been set or not.
The default operation mode is import. That means that a multiplexed
MiniSEED file or another record source such as ArcLink is used to import
records into a SDS structure.
.SS Verbosity
.INDENT 0.0
.TP
.B \-v, \-\-verbose
Verbose mode.
.UNINDENT
.INDENT 0.0
.TP
.B \-h, \-\-help
Display a help message.
.UNINDENT
.SS Mode
.INDENT 0.0
.TP
.B \-\-check
Check mode. Check all files
in the given directory for erroneous miniSEED records.
All sub\-directories are included. If no directory is given,
the default SDS archive is scanned. Checks are only complete
for files containing exactly one stream. More complete checks
are made with scmssort.
.UNINDENT
.INDENT 0.0
.TP
.B \-d, \-\-dump
Set export (dump) mode. Records are retrieved from an archive and
written to standard output.
.UNINDENT
.INDENT 0.0
.TP
.B \-I
Import mode (default): Specify the recordstream URL to read
the data from for archiving. When using any other
recordstream than file, a stream list file is needed.
Specifying \- implies \fI\%file://\fP\- (stdin). If no mode is
explicitly specified, \-I \fI\%file://\fP\- is assumed.
.UNINDENT
.SS Processing
.INDENT 0.0
.TP
.B \-c channels
Channel filter to be applied to the data streams.
Default for Dump: \(dq(B|E|H|M|S)(D|H|L|N)(E|F|N|Z|1|2|3)\(dq
Default for Import: \(dq*\(dq
.UNINDENT
.INDENT 0.0
.TP
.B \-E
Dump mode: sort records according to their end time.
Default: start time.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-files count
Dump mode: Specify the number of file handles to cache.
Default: 100.
.UNINDENT
.INDENT 0.0
.TP
.B \-i
Ignore records without data samples.
.UNINDENT
.INDENT 0.0
.TP
.B \-l, \-\-list file
Import, dump mode: Use a stream list file with time windows instead
of defined networks and channels (\-n, \-c and \-t are ignored).
The list can be generated from events by scevtstreams. One
line per stream. Line format: starttime;endtime;streamID
The time format is the same as described in option \(aq\-t\(aq.
.sp
Example:
.sp
2019\-07\-17 02:00:00;2019\-07\-17 02:10:00;GR.CLL..BH?
.UNINDENT
.INDENT 0.0
.TP
.B \-m, \-\-modify
Dump mode: Modify the record time for real time playback.
The first record time is NOW. The relative time of
successive records to the first one are kept.
.UNINDENT
.INDENT 0.0
.TP
.B \-n networks
Import, dump mode: Data stream selection as a comma separated list
\(dqstream1,stream2,streamX\(dq where each stream can be NET or NET.STA
or NET.STA.LOC or NET.STA.LOC.CHA.
If CHA is omitted, it defaults to the value of \-c option.
Default: \(dq*\(dq
.UNINDENT
.INDENT 0.0
.TP
.B \-\-nslc file
Import, dump mode: Stream list file to be used instead of
defined networks and channels (\-n and \-c are ignored)
for filtering the data by the given streams. Dump mode:
Use in combination with \-t! One line per stream, line
format: NET.STA.LOC.CHA
.sp
Example:
.sp
GR.CLL..BH?
.UNINDENT
.INDENT 0.0
.TP
.B \-\-rename rule
Import, dump mode: Rename stream data according to the provided
rule(s). A rule is \(dq[match\-stream:]rename\-stream\(dq and match\-stream
is optional. match\-stream and rename\-stream are in the
\(dqNET.STA.LOC.CHA\(dq format. match\-stream supports special
charactes \(dq?\(dq \(dq*\(dq \(dq|\(dq \(dq(\(dq \(dq)\(dq. rename\-stream supports the
special character \(dq\-\(dq that can be used in place of NET, STA,
LOC, CHA codes with the meaning of not renaming those.
\(dq\-\(dq can also be used as the last character in CHA code.
Multiple rules can be provided as a comma separated list
or by providing multiple \-\-rename options.
.UNINDENT
.INDENT 0.0
.TP
.B \-s, \-\-sort
Dump mode: Sort records by [start\-]time. To sort records by their
end time use \-E.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-speed value
Dump mode: Specify the speed to dump the records. A value of 0 means
no delay otherwise speed is a multiplier of the real time difference
between the records. When feeding the records directly into the replay
pipe a value of 1 (real time) is recommended.
.UNINDENT
.INDENT 0.0
.TP
.B \-t, \-\-time\-window timeWindow
Import, dump mode: Specify the time window (as one properly
quoted string) to dump records for. Times are UTC and
separated by a tilde \(dq~\(dq. To dump one hour of
waveform data between 2008/01/01 00:00:00 and 2008/01/01
01:00:00 use
<\-t \(dq2008\-01\-01 00:00:00~2008\-01\-01 01:00:00\(dq>.
.UNINDENT
.SS Output
.INDENT 0.0
.TP
.B \-o, \-\-output
Dump, Import mode: Write data to given file instead of creating
a SDS archive. Deactivates \-\-stdout. Deactivated by \-\-test.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-print\-streams
Print stream information only and exit. Works in import, dump
and check mode. Output: NET.STA.LOC.CHA StartTime EndTime.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-stdout
Import mode: Write to stdout instead of creating a SDS archive.
Deactivated by \-\-test and \-\-output.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-test
Test input only, deactivate all miniSEED output. This switch is
useful for debugging and printing stream information with
\-\-print\-streams.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-with\-filecheck
Import mode: Check all accessed files. Unsorted or unreadable
files are reported to stderr. Checks are only complete
for files containing exactly one stream. More complete
checks are made with scmssort.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-with\-filename
Import mode: Print all accessed files to stderr after import.
.UNINDENT
.SH AUTHOR
gempa GmbH, GFZ Potsdam
.SH COPYRIGHT
gempa GmbH, GFZ Potsdam
.\" Generated by docutils manpage writer.
.
