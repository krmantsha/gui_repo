<!DOCTYPE html>

<html >
  <head>
    <meta charset="utf-8" />
    <title>scmag &#8212; SeisComP Release documentation</title>
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/seiscomp.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/graphviz.css" />
    <script type="text/javascript" src="../_static/seiscomp.js"></script>
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/language_data.js"></script>
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="scqc" href="scqc.html" />
    <link rel="prev" title="scevent" href="scevent.html" /> 
  </head>
  <body>
    <div class="header">
      <div class="container">
        <div class="brand">
          <img class="logo" src="../_static/brands/seiscomp/text/white.svg"/>
           <!-- span class="title">SeisComP Release</span -->
          <span class="version">5.5.3</span>
        </div>
      </div>
    </div>
    <div class="nav">
      <div class="container">
        <div class="content"><a class="pull-right" id="sidebar-toggle">TOC</a>
          
    <div class="related" role="navigation" aria-label="related navigation">
      <ul>
        <li class="right">
          <a href="../genindex.html" title="General Index"
             accesskey="I">
            index
          </a>
        </li>
        <li class="right">
          <a href="scqc.html" title="scqc"
             accesskey="N">
            next
          </a>
        </li>
        <li class="right">
          <a href="scevent.html" title="scevent"
             accesskey="P">
            previous
          </a>
        </li>
        <li class="nav-item nav-item-0">
          <a href="../index.html">Home</a>
        </li>
        <li class="nav-item nav-item-1">
          <a href="../modules.html" >Modules</a>
        </li>
        <li class="nav-item nav-item-2">
          <a href="../toc/processing.html" accesskey="U">Processing</a>
        </li> 
      </ul>
    </div>
        </div>
      </div>
    </div>
    <div class="container">
      <div class="fitted content" id="anchors-container">
        <div class="body" role="main">
          
  <div class="section" id="scmag">
<span id="id1"></span><h1>scmag<a class="headerlink" href="#scmag" title="Permalink to this headline">¶</a></h1>
<p><strong>Calculates magnitudes of different types.</strong></p>
<div class="section" id="description">
<h2>Description<a class="headerlink" href="#description" title="Permalink to this headline">¶</a></h2>
<p>The purpose of scmag is to compute magnitudes from pre-computed amplitudes.
Instead it takes amplitudes and origins as input and produces StationMagnitudes
and (network) Magnitudes as output. It does not access waveforms.
The resulting magnitudes are sent to the “MAGNITUDE” group. scmag doesn’t access
any waveforms. It only uses amplitudes previously calculated.</p>
<p>The purpose of scmag is the decoupling of magnitude computation from amplitude
measurements. This allows several modules to generate amplitudes concurrently,
like <a class="reference internal" href="scautopick.html#scautopick"><span class="std std-ref">scautopick</span></a> or <a class="reference internal" href="scamp.html#scamp"><span class="std std-ref">scamp</span></a>. As soon as an origin comes in, the amplitudes related
to the picks are taken either from the memory buffer or the database to compute
the magnitudes.</p>
<div class="section" id="relationship-between-amplitudes-and-origins">
<h3>Relationship between amplitudes and origins<a class="headerlink" href="#relationship-between-amplitudes-and-origins" title="Permalink to this headline">¶</a></h3>
<p>scmag makes use of the fact that origins sent by <a class="reference internal" href="scautoloc.html#scautoloc"><span class="std std-ref">scautoloc</span></a>, <a class="reference internal" href="scolv.html#scolv"><span class="std std-ref">scolv</span></a>
or other modules include
the complete set of arrivals, which reference picks used for origin computation.
The picks in turn are referenced by a number of amplitudes, some of which are
relevant for magnitude computation.</p>
<p>Read the <a class="reference internal" href="scamp.html#scamp"><span class="std std-ref">scamp</span></a> documentation for more details on amplitude measurements.</p>
</div>
<div class="section" id="primary-magnitudes">
<span id="scmag-primarym"></span><h3>Primary magnitudes<a class="headerlink" href="#primary-magnitudes" title="Permalink to this headline">¶</a></h3>
<p>Primary magnitudes are computed from amplitudes and station-event distances.
Currently the following primary magnitude types are implemented.</p>
</div>
<div class="section" id="local-distances">
<h3>Local distances<a class="headerlink" href="#local-distances" title="Permalink to this headline">¶</a></h3>
<dl class="simple">
<dt><a class="reference internal" href="../base/glossary.html#term-magnitude-duration-md"><span class="xref std std-term">Md</span></a></dt><dd><p>Duration magnitude as described in HYPOINVERSE (<span id="id2">Klein [<a class="reference internal" href="../base/references.html#id47" title="F.W. Klein. User’s guide to HYPOINVERSE-2000, a Fortran program to solve for earthquake locations and magnitudes. US Geological Survey, 2002-171:, 2002. URL: https://www.usgs.gov/node/279394, doi:10.3133/ofr02171.">47</a>]</span>).</p>
</dd>
<dt><a class="reference internal" href="../base/glossary.html#term-magnitude-jma-m-jma"><span class="xref std std-term">Mjma</span></a></dt><dd><p>Mjma is computed on displacement data using body waves of period &lt; 30s.</p>
</dd>
<dt><a class="reference internal" href="../base/glossary.html#term-magnitude-local-ml"><span class="xref std std-term">ML</span></a></dt><dd><p>Local (Richter) magnitude calculated on the horizontal components using a
correction term to fit with the standard ML (<span id="id3">Richter [<a class="reference internal" href="../base/references.html#id61" title="C.F. Richter. An instrumental earthquake magnitude scale. Bull. Seismol. Soc. Am., 1:1 - 32, 1935. URL: https://resolver.caltech.edu/CaltechAUTHORS:20140804-143558638, doi:10.1785/BSSA0250010001.">53</a>]</span>).</p>
</dd>
<dt><a class="reference internal" href="../base/glossary.html#term-magnitude-local-custom-mlc"><span class="xref std std-term">MLc</span></a></dt><dd><p>Local custom magnitude calculated on the horizontal components according to
Hessian Earthquake Service and <span id="id4">Stange [<a class="reference internal" href="../base/references.html#id75" title="S. Stange. ML determination for local and regional events using a sparse network in Southwestern Germany. J. Seismol., 10:247 – 257, 2006. doi:10.1007/s10950-006-9010-6.">57</a>]</span></p>
</dd>
<dt><a class="reference internal" href="../base/glossary.html#term-magnitude-local-horizontal-mlh"><span class="xref std std-term">MLh</span></a></dt><dd><p>Local magnitude calculated on the horizontal components according to SED
specifications.</p>
</dd>
<dt><a class="reference internal" href="../base/glossary.html#term-magnitude-local-vertical-mlv"><span class="xref std std-term">MLv</span></a></dt><dd><p>Local magnitude calculated on the vertical component using a correction term
to fit with the standard ML.</p>
</dd>
<dt><a class="reference internal" href="../base/glossary.html#term-magnitude-local-gns-geonet-mlr"><span class="xref std std-term">MLr</span></a></dt><dd><p>Local magnitude calculated from MLv amplitudes based on GNS/GEONET specifications
for New Zealand (<span id="id5">Ristau <em>et al.</em> [<a class="reference internal" href="../base/references.html#id63" title="J. Ristau, D. Harte, and J. Salichon. A Revised Local Magnitude (ML) Scale for New Zealand Earthquakes. Bull. Seismol. Soc. Am., 106(2):, 2016. doi:10.1785/0120150293.">54</a>]</span>).</p>
</dd>
<dt><a class="reference internal" href="../base/glossary.html#term-magnitude-nuttli-mn"><span class="xref std std-term">MN</span></a></dt><dd><p>Nuttli magnitude for Canada and other Cratonic regions (<span id="id6">Nuttli [<a class="reference internal" href="../base/references.html#id57" title="O.W. Nuttli. Seismic wave attenuation and magnitude relations for eastern north america. J. Geophys. Res., 5:876 - 885, 1973. doi:10.1029/JB078i005p00876.">50</a>]</span>).</p>
</dd>
</dl>
</div>
<div class="section" id="teleseismic-distances">
<h3>Teleseismic distances<a class="headerlink" href="#teleseismic-distances" title="Permalink to this headline">¶</a></h3>
<dl class="simple">
<dt><a class="reference internal" href="../base/glossary.html#term-magnitude-body-wave-mb"><span class="xref std std-term">mb</span></a></dt><dd><p>Narrow band body wave magnitude measured on a WWSSN-SP filtered trace</p>
</dd>
<dt><a class="reference internal" href="../base/glossary.html#term-magnitude-cumulative-body-wave-mbc"><span class="xref std std-term">mBc</span></a></dt><dd><p>Cumulative body wave magnitude</p>
</dd>
<dt><a class="reference internal" href="../base/glossary.html#term-magnitude-broadband-body-wave-mb"><span class="xref std std-term">mB</span></a></dt><dd><p>Broad band body wave magnitude after <span id="id7">Bormann and Saul [<a class="reference internal" href="../base/references.html#id18" title="P. Bormann and J. Saul. The new iaspei standard broadband magnitude mb. Seismol. Res. Lett., 5:698 - 705, 2008. doi:10.1785/gssrl.79.5.698.">35</a>]</span></p>
</dd>
<dt><a class="reference internal" href="../base/glossary.html#term-magnitude-broadband-p-wave-moment-mwp"><span class="xref std std-term">Mwp</span></a></dt><dd><p>The body wave magnitude of <span id="id8">Tsuboi <em>et al.</em> [<a class="reference internal" href="../base/references.html#id76" title="S. Tsuboi, K. Abe, K. Takano, and Y. Yamanaka. Rapid determination of Mw from broadband P waveforms. Bull. Seismol. Soc. Am., 1995. doi:10.1785/BSSA0850020606.">58</a>]</span></p>
</dd>
<dt><a class="reference internal" href="../base/glossary.html#term-magnitude-surface-wave-ms-20"><span class="xref std std-term">Ms_20</span></a></dt><dd><p>Surface-wave magnitude at 20 s period</p>
</dd>
<dt><a class="reference internal" href="../base/glossary.html#term-magnitude-broadband-surface-wave-ms-bb"><span class="xref std std-term">Ms(BB)</span></a></dt><dd><p>Broad band surface-wave magnitude</p>
</dd>
</dl>
</div>
<div class="section" id="derived-magnitudes">
<h3>Derived magnitudes<a class="headerlink" href="#derived-magnitudes" title="Permalink to this headline">¶</a></h3>
<p>Additionally, scmag derives the following magnitudes from primary magnitudes:</p>
<dl>
<dt><a class="reference internal" href="../base/glossary.html#term-magnitude-derived-mb-mw-mb"><span class="xref std std-term">Mw(mB)</span></a></dt><dd><p>Estimation of the moment magnitude Mw based on mB using the Mw vs. mB
regression of <span id="id9">Bormann and Saul [<a class="reference internal" href="../base/references.html#id18" title="P. Bormann and J. Saul. The new iaspei standard broadband magnitude mb. Seismol. Res. Lett., 5:698 - 705, 2008. doi:10.1785/gssrl.79.5.698.">35</a>]</span></p>
</dd>
<dt><a class="reference internal" href="../base/glossary.html#term-magnitude-derived-mwp-mw-mwp"><span class="xref std std-term">Mw(Mwp)</span></a></dt><dd><p>Estimation of the moment magnitude Mw based on Mwp using the Mw vs. Mwp
regression of <span id="id10">Whitmore <em>et al.</em> [<a class="reference internal" href="../base/references.html#id81" title="P.M. Whitmore, S. Tsuboi, B. Hirshorn, and T.J. Sokolowski. Magnitude dependent correction for Mwp. Science of Tsunami Hazards, 20(4):, 2002.">60</a>]</span></p>
</dd>
<dt><a class="reference internal" href="../base/glossary.html#term-magnitude-summary-m"><span class="xref std std-term">M</span></a></dt><dd><p>Summary magnitude, which consists of a weighted average of the individual
magnitudes and attempts to be a best possible compromise between all magnitudes.
See below for configuration and also scevent for how to add the summary magnitude
to the list of possible preferred magnitudes or how to make it always preferred.</p>
<p>More details are given in the <a class="reference internal" href="#scmag-summarym"><span class="std std-ref">section Summary magnitude</span></a>.</p>
</dd>
<dt>Mw(avg)</dt><dd><p>Estimation of the moment magnitude Mw based on a weighted average of other
magnitudes, currently MLv, mb and Mw(mB), in future possibly other magnitudes as
well, especially those suitable for very large events. The purpose of Mw(avg) is
to have, at any stage during the processing, a “best possible” estimation of the
magnitude by combining all available magnitudes into a single, weighted average.
Initially the average will consist of only MLv and/or mb measurements, but as soon
as Mw(mB) measurements become available, these (and in future other large-event
magnitudes) become progressively more weight in the average.</p>
</dd>
</dl>
<p>If an amplitude is updated, the corresponding magnitude is updated as well.
This allows the computation of preliminary, real-time magnitudes even before
the full length of the P coda is available.</p>
</div>
</div>
<div class="section" id="station-magnitudes">
<span id="scmag-stationm"></span><h2>Station magnitudes<a class="headerlink" href="#station-magnitudes" title="Permalink to this headline">¶</a></h2>
<p>Station magnitudes of a <a class="reference internal" href="#scmag-primarym"><span class="std std-ref">particular magnitude type</span></a> are
calculated based on amplitude values
considered by this magnitude type and the distance between the event and the station
at which the amplitude was measured. Typically, epicentral distance is used.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Usually station magnitudes use amplitudes of the same type. However, some magnitude
consider amplitudes of another type. E.g. <a class="reference internal" href="../base/glossary.html#term-magnitude-local-gns-geonet-mlr"><span class="xref std std-term">MLr</span></a>
uses amplitudes computed for <a class="reference internal" href="../base/glossary.html#term-magnitude-local-vertical-mlv"><span class="xref std std-term">MLv</span></a>.</p>
</div>
</div>
<div class="section" id="network-magnitudes">
<span id="scmag-networkm"></span><h2>Network magnitudes<a class="headerlink" href="#network-magnitudes" title="Permalink to this headline">¶</a></h2>
<p>The network magnitude is a magnitude value summarizing several <a class="reference internal" href="#scmag-stationm"><span class="std std-ref">station magnitudes</span></a>
values of one <a class="reference internal" href="../base/glossary.html#term-origin"><span class="xref std std-term">origin</span></a>.
Different methods are available for summarizing the station magnitudes:</p>
<ul class="simple">
<li><p>mean: the usual mean value</p></li>
<li><p>trimmed mean value:
To stabilize the network magnitudes the smallest and the largest 12.5% of the
<a class="reference internal" href="../base/glossary.html#term-station-magnitude"><span class="xref std std-term">station magnitude</span></a> values are removed before computing the mean.</p></li>
<li><p>median: the usual median value</p></li>
<li><p>median trimmed mean:
Removing all station magnitudes with a distance greater than 0.5 (default)
from the median of all station magnitudes and computing the mean of all
remaining station magnitudes.</p></li>
</ul>
<p>Default values apply for each magnitude type.
In <a class="reference internal" href="scolv.html#scolv"><span class="std std-ref">scolv</span></a> the methods, the stations magnitudes and other parameters can be
selected interactively.</p>
</div>
<div class="section" id="summary-magnitude">
<span id="scmag-summarym"></span><h2>Summary magnitude<a class="headerlink" href="#summary-magnitude" title="Permalink to this headline">¶</a></h2>
<p>scmag can compute a summary magnitude as a weighted sum from all available
<a class="reference internal" href="#scmag-networkm"><span class="std std-ref">network magnitudes</span></a>.
This magnitude is typically called <strong>M</strong> as configured in
<a class="reference internal" href="#confval-summaryMagnitude.type"><code class="xref std std-confval docutils literal notranslate"><span class="pre">summaryMagnitude.type</span></code></a>.</p>
<p>It is computed as a weighted average over the available magnitudes:</p>
<div class="math">
<p><img src="../_images/math/ab55f09a7f1d291f1dc066eeb2521869262bf420.png" alt="M = \frac{\sum w_{i} M_{i}}{\sum w_i}

w_{i} = a_i stationCount(M_{i}) + b_i"/></p>
</div><p>The coefficients a and b can be configured per magnitude type by
<a class="reference internal" href="#confval-summaryMagnitude.coefficients.a"><code class="xref std std-confval docutils literal notranslate"><span class="pre">summaryMagnitude.coefficients.a</span></code></a>
and <a class="reference internal" href="#confval-summaryMagnitude.coefficients.b"><code class="xref std std-confval docutils literal notranslate"><span class="pre">summaryMagnitude.coefficients.b</span></code></a>, respectively.
Furthermore each magnitude type can be specifically added to or excluded from the
summary magnitude calculation
as defined in <a class="reference internal" href="#confval-summaryMagnitude.whitelist"><code class="xref std std-confval docutils literal notranslate"><span class="pre">summaryMagnitude.whitelist</span></code></a> or
<a class="reference internal" href="#confval-summaryMagnitude.blacklist"><code class="xref std std-confval docutils literal notranslate"><span class="pre">summaryMagnitude.blacklist</span></code></a>, respectively.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>While the magnitudes are computed by scmag the decision about the preferred
magnitude of an <a class="reference internal" href="../base/glossary.html#term-event"><span class="xref std std-term">event</span></a> is made by <a class="reference internal" href="scevent.html#scevent"><span class="std std-ref">scevent</span></a>.</p>
</div>
</div>
<div class="section" id="preferred-magnitude">
<h2>Preferred Magnitude<a class="headerlink" href="#preferred-magnitude" title="Permalink to this headline">¶</a></h2>
<p>The preferred magnitude of an <a class="reference internal" href="../base/glossary.html#term-event"><span class="xref std std-term">event</span></a> is set automatically by <a class="reference internal" href="scevent.html#scevent"><span class="std std-ref">scevent</span></a>
or interactively in <a class="reference internal" href="scolv.html#scolv"><span class="std std-ref">scolv</span></a>. It can be any network magnitude or the summary
magnitude.</p>
</div>
<div class="section" id="module-configuration">
<span id="scmag-configuration"></span><h2>Module Configuration<a class="headerlink" href="#module-configuration" title="Permalink to this headline">¶</a></h2>
<div class="line-block">
<div class="line"><code class="file docutils literal notranslate"><span class="pre">etc/defaults/global.cfg</span></code></div>
<div class="line"><code class="file docutils literal notranslate"><span class="pre">etc/defaults/scmag.cfg</span></code></div>
<div class="line"><code class="file docutils literal notranslate"><span class="pre">etc/global.cfg</span></code></div>
<div class="line"><code class="file docutils literal notranslate"><span class="pre">etc/scmag.cfg</span></code></div>
<div class="line"><code class="file docutils literal notranslate"><span class="pre">~/.seiscomp/global.cfg</span></code></div>
<div class="line"><code class="file docutils literal notranslate"><span class="pre">~/.seiscomp/scmag.cfg</span></code></div>
</div>
<p>scmag inherits <a class="reference internal" href="global.html#global-configuration"><span class="std std-ref">global options</span></a>.</p>
<dl class="confval">
<dt id="confval-magnitudes">
<code class="sig-name descname">magnitudes</code><a class="headerlink" href="#confval-magnitudes" title="Permalink to this definition">¶</a></dt>
<dd><p>Default: <code class="docutils literal notranslate"><span class="pre">MLv,</span> <span class="pre">mb,</span> <span class="pre">mB,</span> <span class="pre">Mwp</span></code></p>
<p>Type: <em>list:string</em></p>
<p>The magnitude types to be calculated. Station magnitudes are
computed from their amplitudes, network magnitudes from their
station magnitudes.</p>
</dd></dl>

<dl class="confval">
<dt id="confval-minimumArrivalWeight">
<code class="sig-name descname">minimumArrivalWeight</code><a class="headerlink" href="#confval-minimumArrivalWeight" title="Permalink to this definition">¶</a></dt>
<dd><p>Default: <code class="docutils literal notranslate"><span class="pre">0.5</span></code></p>
<p>Type: <em>double</em></p>
<p>The minimum weight of an arrival for an associated amplitude
to be used for calculating a magnitude.</p>
</dd></dl>

<div class="admonition note">
<p class="admonition-title">Note</p>
<p><strong>magnitudes.*</strong>
<em>General parameters for computing magnitudes. Others are configured</em>
<em>by global binding parameters for specific magnitude types.</em></p>
</div>
<dl class="confval">
<dt id="confval-magnitudes.average">
<code class="sig-name descname">magnitudes.average</code><a class="headerlink" href="#confval-magnitudes.average" title="Permalink to this definition">¶</a></dt>
<dd><p>Default: <code class="docutils literal notranslate"><span class="pre">default</span></code></p>
<p>Type: <em>list:string</em></p>
<p>The methods for computing the network magnitude
from station magnitudes. Exactly one method per
magnitude can be configured.
To define the averaging method per magnitude type append
the type after colon, e.g.:
“magnitudes.average = default, MLv:median”</p>
<p>default: Compute the mean if less than 4 contributed
station magnitudes exist. Otherwise apply a trimmed mean
of 25%.</p>
<p>Options are “default”, “mean”,
“median”, “trimmedMean” and
“medianTrimmedMean”.</p>
</dd></dl>

<dl class="confval">
<dt id="confval-connection.sendInterval">
<code class="sig-name descname">connection.sendInterval</code><a class="headerlink" href="#confval-connection.sendInterval" title="Permalink to this definition">¶</a></dt>
<dd><p>Default: <code class="docutils literal notranslate"><span class="pre">1</span></code></p>
<p>Type: <em>int</em></p>
<p>Unit: <em>s</em></p>
<p>Interval between 2 sending processes. The interval controls
how often information is updated.</p>
</dd></dl>

<div class="admonition note">
<p class="admonition-title">Note</p>
<p><strong>summaryMagnitude.*</strong>
<em>The summary magnitude is the weighted average from all</em>
<em>defined network magnitude types: Single network magnitude values</em>
<em>are multiplied with their magnitude-type specific weight and</em>
<em>summed up. The resulting sum is divided by the sum of all weights.</em></p>
</div>
<dl class="confval">
<dt id="confval-summaryMagnitude.enabled">
<code class="sig-name descname">summaryMagnitude.enabled</code><a class="headerlink" href="#confval-summaryMagnitude.enabled" title="Permalink to this definition">¶</a></dt>
<dd><p>Default: <code class="docutils literal notranslate"><span class="pre">true</span></code></p>
<p>Type: <em>boolean</em></p>
<p>Enables summary magnitude calculation.</p>
</dd></dl>

<dl class="confval">
<dt id="confval-summaryMagnitude.type">
<code class="sig-name descname">summaryMagnitude.type</code><a class="headerlink" href="#confval-summaryMagnitude.type" title="Permalink to this definition">¶</a></dt>
<dd><p>Default: <code class="docutils literal notranslate"><span class="pre">M</span></code></p>
<p>Type: <em>string</em></p>
<p>Define the type/name of the summary magnitude.</p>
</dd></dl>

<dl class="confval">
<dt id="confval-summaryMagnitude.minStationCount">
<code class="sig-name descname">summaryMagnitude.minStationCount</code><a class="headerlink" href="#confval-summaryMagnitude.minStationCount" title="Permalink to this definition">¶</a></dt>
<dd><p>Default: <code class="docutils literal notranslate"><span class="pre">4</span></code></p>
<p>Type: <em>int</em></p>
<p>This is the minimum station magnitude required for any
magnitude to contribute to the summary magnitude at all. If
this is set to 4, then no magnitude with less than 4 station
magnitudes is taken into consideration even if this results
in no summary magnitude at all. For this reason, the default
here is 1 but in a purely automatic  system it should be
higher, at least 4 is recommended.</p>
</dd></dl>

<dl class="confval">
<dt id="confval-summaryMagnitude.blacklist">
<code class="sig-name descname">summaryMagnitude.blacklist</code><a class="headerlink" href="#confval-summaryMagnitude.blacklist" title="Permalink to this definition">¶</a></dt>
<dd><p>Type: <em>list:string</em></p>
<p>Define the magnitude types to be excluded from the summary
magnitude calculation.</p>
</dd></dl>

<dl class="confval">
<dt id="confval-summaryMagnitude.whitelist">
<code class="sig-name descname">summaryMagnitude.whitelist</code><a class="headerlink" href="#confval-summaryMagnitude.whitelist" title="Permalink to this definition">¶</a></dt>
<dd><p>Type: <em>list:string</em></p>
<p>Define the magnitude types to be included in the summary
magnitude calculation.</p>
</dd></dl>

<div class="admonition note">
<p class="admonition-title">Note</p>
<p><strong>summaryMagnitude.coefficients.*</strong>
<em>The coefficients defining the weight of network magnitudes</em>
<em>for calculating the summary magnitude.</em>
<em>Weight = a * magnitudeStationCount + b.</em></p>
</div>
<dl class="confval">
<dt id="confval-summaryMagnitude.coefficients.a">
<code class="sig-name descname">summaryMagnitude.coefficients.a</code><a class="headerlink" href="#confval-summaryMagnitude.coefficients.a" title="Permalink to this definition">¶</a></dt>
<dd><p>Default: <code class="docutils literal notranslate"><span class="pre">0,</span> <span class="pre">Mw(mB):0.4,</span> <span class="pre">Mw(Mwp):0.4</span></code></p>
<p>Type: <em>list:string</em></p>
<p>Define the coefficients a. To define the value per magnitude
type append the type after colon. A value without a
type defines the default value.</p>
</dd></dl>

<dl class="confval">
<dt id="confval-summaryMagnitude.coefficients.b">
<code class="sig-name descname">summaryMagnitude.coefficients.b</code><a class="headerlink" href="#confval-summaryMagnitude.coefficients.b" title="Permalink to this definition">¶</a></dt>
<dd><p>Default: <code class="docutils literal notranslate"><span class="pre">1,</span> <span class="pre">MLv:2,</span> <span class="pre">Mw(mB):-1,</span> <span class="pre">Mw(Mwp):-1</span></code></p>
<p>Type: <em>list:string</em></p>
<p>Define the coefficients b. To define the value per magnitude
type append the type after colon. A value without a
type defines the default value.</p>
</dd></dl>

</div>
<div class="section" id="command-line-options">
<h2>Command-Line Options<a class="headerlink" href="#command-line-options" title="Permalink to this headline">¶</a></h2>
<div class="section" id="generic">
<h3>Generic<a class="headerlink" href="#generic" title="Permalink to this headline">¶</a></h3>
<dl class="option">
<dt id="cmdoption-scmag-h">
<code class="sig-name descname">-h</code><code class="sig-prename descclassname"></code><code class="sig-prename descclassname">, </code><code class="sig-name descname">--help</code><code class="sig-prename descclassname"></code><a class="headerlink" href="#cmdoption-scmag-h" title="Permalink to this definition">¶</a></dt>
<dd><p>Show help message.</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-scmag-v">
<code class="sig-name descname">-V</code><code class="sig-prename descclassname"></code><code class="sig-prename descclassname">, </code><code class="sig-name descname">--version</code><code class="sig-prename descclassname"></code><a class="headerlink" href="#cmdoption-scmag-v" title="Permalink to this definition">¶</a></dt>
<dd><p>Show version information.</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-scmag-config-file">
<code class="sig-name descname">--config-file</code><code class="sig-prename descclassname"> arg</code><a class="headerlink" href="#cmdoption-scmag-config-file" title="Permalink to this definition">¶</a></dt>
<dd><p>Use alternative configuration file. When this option is
used the loading of all stages is disabled. Only the
given configuration file is parsed and used. To use
another name for the configuration create a symbolic
link of the application or copy it. Example:
scautopick -&gt; scautopick2.</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-scmag-plugins">
<code class="sig-name descname">--plugins</code><code class="sig-prename descclassname"> arg</code><a class="headerlink" href="#cmdoption-scmag-plugins" title="Permalink to this definition">¶</a></dt>
<dd><p>Load given plugins.</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-scmag-d">
<code class="sig-name descname">-D</code><code class="sig-prename descclassname"></code><code class="sig-prename descclassname">, </code><code class="sig-name descname">--daemon</code><code class="sig-prename descclassname"></code><a class="headerlink" href="#cmdoption-scmag-d" title="Permalink to this definition">¶</a></dt>
<dd><p>Run as daemon. This means the application will fork itself
and doesn’t need to be started with &amp;.</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-scmag-auto-shutdown">
<code class="sig-name descname">--auto-shutdown</code><code class="sig-prename descclassname"> arg</code><a class="headerlink" href="#cmdoption-scmag-auto-shutdown" title="Permalink to this definition">¶</a></dt>
<dd><p>Enable/disable self-shutdown because a master module shutdown.
This only works when messaging is enabled and the master
module sends a shutdown message (enabled with –start-stop-msg
for the master module).</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-scmag-shutdown-master-module">
<code class="sig-name descname">--shutdown-master-module</code><code class="sig-prename descclassname"> arg</code><a class="headerlink" href="#cmdoption-scmag-shutdown-master-module" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the name of the master-module used for auto-shutdown.
This is the application name of the module actually
started. If symlinks are used, then it is the name of
the symlinked application.</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-scmag-shutdown-master-username">
<code class="sig-name descname">--shutdown-master-username</code><code class="sig-prename descclassname"> arg</code><a class="headerlink" href="#cmdoption-scmag-shutdown-master-username" title="Permalink to this definition">¶</a></dt>
<dd><p>Set the name of the master-username of the messaging
used for auto-shutdown. If “shutdown-master-module” is
given as well, this parameter is ignored.</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-scmag-x">
<code class="sig-name descname">-x</code><code class="sig-prename descclassname"></code><code class="sig-prename descclassname">, </code><code class="sig-name descname">--expiry</code><code class="sig-prename descclassname"> time</code><a class="headerlink" href="#cmdoption-scmag-x" title="Permalink to this definition">¶</a></dt>
<dd><p>Time span in hours after which objects expire.</p>
</dd></dl>

</div>
<div class="section" id="verbosity">
<h3>Verbosity<a class="headerlink" href="#verbosity" title="Permalink to this headline">¶</a></h3>
<dl class="option">
<dt id="cmdoption-scmag-verbosity">
<code class="sig-name descname">--verbosity</code><code class="sig-prename descclassname"> arg</code><a class="headerlink" href="#cmdoption-scmag-verbosity" title="Permalink to this definition">¶</a></dt>
<dd><p>Verbosity level [0..4]. 0:quiet, 1:error, 2:warning, 3:info,
4:debug.</p>
</dd></dl>

<dl class="option">
<dt id="id11">
<code class="sig-name descname">-v</code><code class="sig-prename descclassname"></code><code class="sig-prename descclassname">, </code><code class="sig-name descname">--v</code><code class="sig-prename descclassname"></code><a class="headerlink" href="#id11" title="Permalink to this definition">¶</a></dt>
<dd><p>Increase verbosity level (may be repeated, eg. -vv).</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-scmag-q">
<code class="sig-name descname">-q</code><code class="sig-prename descclassname"></code><code class="sig-prename descclassname">, </code><code class="sig-name descname">--quiet</code><code class="sig-prename descclassname"></code><a class="headerlink" href="#cmdoption-scmag-q" title="Permalink to this definition">¶</a></dt>
<dd><p>Quiet mode: no logging output.</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-scmag-component">
<code class="sig-name descname">--component</code><code class="sig-prename descclassname"> arg</code><a class="headerlink" href="#cmdoption-scmag-component" title="Permalink to this definition">¶</a></dt>
<dd><p>Limit the logging to a certain component. This option can
be given more than once.</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-scmag-s">
<code class="sig-name descname">-s</code><code class="sig-prename descclassname"></code><code class="sig-prename descclassname">, </code><code class="sig-name descname">--syslog</code><code class="sig-prename descclassname"></code><a class="headerlink" href="#cmdoption-scmag-s" title="Permalink to this definition">¶</a></dt>
<dd><p>Use syslog logging backend. The output usually goes to
/var/lib/messages.</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-scmag-l">
<code class="sig-name descname">-l</code><code class="sig-prename descclassname"></code><code class="sig-prename descclassname">, </code><code class="sig-name descname">--lockfile</code><code class="sig-prename descclassname"> arg</code><a class="headerlink" href="#cmdoption-scmag-l" title="Permalink to this definition">¶</a></dt>
<dd><p>Path to lock file.</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-scmag-console">
<code class="sig-name descname">--console</code><code class="sig-prename descclassname"> arg</code><a class="headerlink" href="#cmdoption-scmag-console" title="Permalink to this definition">¶</a></dt>
<dd><p>Send log output to stdout.</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-scmag-debug">
<code class="sig-name descname">--debug</code><code class="sig-prename descclassname"></code><a class="headerlink" href="#cmdoption-scmag-debug" title="Permalink to this definition">¶</a></dt>
<dd><p>Execute in debug mode.
Equivalent to –verbosity=4 –console=1 .</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-scmag-log-file">
<code class="sig-name descname">--log-file</code><code class="sig-prename descclassname"> arg</code><a class="headerlink" href="#cmdoption-scmag-log-file" title="Permalink to this definition">¶</a></dt>
<dd><p>Use alternative log file.</p>
</dd></dl>

</div>
<div class="section" id="messaging">
<h3>Messaging<a class="headerlink" href="#messaging" title="Permalink to this headline">¶</a></h3>
<dl class="option">
<dt id="cmdoption-scmag-u">
<code class="sig-name descname">-u</code><code class="sig-prename descclassname"></code><code class="sig-prename descclassname">, </code><code class="sig-name descname">--user</code><code class="sig-prename descclassname"> arg</code><a class="headerlink" href="#cmdoption-scmag-u" title="Permalink to this definition">¶</a></dt>
<dd><p>Overrides configuration parameter <a class="reference internal" href="global.html#confval-connection.username"><code class="xref std std-confval docutils literal notranslate"><span class="pre">connection.username</span></code></a>.</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-scmag-host">
<code class="sig-name descname">-H</code><code class="sig-prename descclassname"></code><code class="sig-prename descclassname">, </code><code class="sig-name descname">--host</code><code class="sig-prename descclassname"> arg</code><a class="headerlink" href="#cmdoption-scmag-host" title="Permalink to this definition">¶</a></dt>
<dd><p>Overrides configuration parameter <a class="reference internal" href="global.html#confval-connection.server"><code class="xref std std-confval docutils literal notranslate"><span class="pre">connection.server</span></code></a>.</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-scmag-t">
<code class="sig-name descname">-t</code><code class="sig-prename descclassname"></code><code class="sig-prename descclassname">, </code><code class="sig-name descname">--timeout</code><code class="sig-prename descclassname"> arg</code><a class="headerlink" href="#cmdoption-scmag-t" title="Permalink to this definition">¶</a></dt>
<dd><p>Overrides configuration parameter <a class="reference internal" href="global.html#confval-connection.timeout"><code class="xref std std-confval docutils literal notranslate"><span class="pre">connection.timeout</span></code></a>.</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-scmag-g">
<code class="sig-name descname">-g</code><code class="sig-prename descclassname"></code><code class="sig-prename descclassname">, </code><code class="sig-name descname">--primary-group</code><code class="sig-prename descclassname"> arg</code><a class="headerlink" href="#cmdoption-scmag-g" title="Permalink to this definition">¶</a></dt>
<dd><p>Overrides configuration parameter <a class="reference internal" href="global.html#confval-connection.primaryGroup"><code class="xref std std-confval docutils literal notranslate"><span class="pre">connection.primaryGroup</span></code></a>.</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-scmag-subscribe-group">
<code class="sig-name descname">-S</code><code class="sig-prename descclassname"></code><code class="sig-prename descclassname">, </code><code class="sig-name descname">--subscribe-group</code><code class="sig-prename descclassname"> arg</code><a class="headerlink" href="#cmdoption-scmag-subscribe-group" title="Permalink to this definition">¶</a></dt>
<dd><p>A group to subscribe to.
This option can be given more than once.</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-scmag-content-type">
<code class="sig-name descname">--content-type</code><code class="sig-prename descclassname"> arg</code><a class="headerlink" href="#cmdoption-scmag-content-type" title="Permalink to this definition">¶</a></dt>
<dd><p>Overrides configuration parameter <a class="reference internal" href="global.html#confval-connection.contentType"><code class="xref std std-confval docutils literal notranslate"><span class="pre">connection.contentType</span></code></a>.</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-scmag-start-stop-msg">
<code class="sig-name descname">--start-stop-msg</code><code class="sig-prename descclassname"> arg</code><a class="headerlink" href="#cmdoption-scmag-start-stop-msg" title="Permalink to this definition">¶</a></dt>
<dd><p>Set sending of a start and a stop message.</p>
</dd></dl>

</div>
<div class="section" id="database">
<h3>Database<a class="headerlink" href="#database" title="Permalink to this headline">¶</a></h3>
<dl class="option">
<dt id="cmdoption-scmag-db-driver-list">
<code class="sig-name descname">--db-driver-list</code><code class="sig-prename descclassname"></code><a class="headerlink" href="#cmdoption-scmag-db-driver-list" title="Permalink to this definition">¶</a></dt>
<dd><p>List all supported database drivers.</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-scmag-database">
<code class="sig-name descname">-d</code><code class="sig-prename descclassname"></code><code class="sig-prename descclassname">, </code><code class="sig-name descname">--database</code><code class="sig-prename descclassname"> arg</code><a class="headerlink" href="#cmdoption-scmag-database" title="Permalink to this definition">¶</a></dt>
<dd><p>The database connection string, format:
<a class="reference external" href="service://user:pwd&#64;host/database">service://user:pwd&#64;host/database</a>.
“service” is the name of the database driver which
can be queried with “–db-driver-list”.</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-scmag-config-module">
<code class="sig-name descname">--config-module</code><code class="sig-prename descclassname"> arg</code><a class="headerlink" href="#cmdoption-scmag-config-module" title="Permalink to this definition">¶</a></dt>
<dd><p>The config module to use.</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-scmag-inventory-db">
<code class="sig-name descname">--inventory-db</code><code class="sig-prename descclassname"> arg</code><a class="headerlink" href="#cmdoption-scmag-inventory-db" title="Permalink to this definition">¶</a></dt>
<dd><p>Load the inventory from the given database or file, format:
[<a class="reference external" href="service://]location">service://]location</a> .</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-scmag-db-disable">
<code class="sig-name descname">--db-disable</code><code class="sig-prename descclassname"></code><a class="headerlink" href="#cmdoption-scmag-db-disable" title="Permalink to this definition">¶</a></dt>
<dd><p>Do not use the database at all</p>
</dd></dl>

</div>
<div class="section" id="input">
<h3>Input<a class="headerlink" href="#input" title="Permalink to this headline">¶</a></h3>
<dl class="option">
<dt id="cmdoption-scmag-ep">
<code class="sig-name descname">--ep</code><code class="sig-prename descclassname"> file</code><a class="headerlink" href="#cmdoption-scmag-ep" title="Permalink to this definition">¶</a></dt>
<dd><p>Defines an event parameters XML file to be read and processed. This
implies offline mode and only processes all origins contained
in that file. It computes station magnitudes for all picks associated
with an origin where amplitudes are available and the corresponding
network magnitudes. Station and network magnitudes having the
evaluation status set are ignored. Use the –force to include those
magnitudes. It outputs an XML text adding the station-
and network magnitudes to the input XML file.</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-scmag-reprocess">
<code class="sig-name descname">--reprocess</code><code class="sig-prename descclassname"></code><a class="headerlink" href="#cmdoption-scmag-reprocess" title="Permalink to this definition">¶</a></dt>
<dd><p>Reprocess also station and network magnitudes with an evaluation
status set but do not change original weights. New
contributions are added with weight 0.</p>
</dd></dl>

</div>
<div class="section" id="reprocess">
<h3>Reprocess<a class="headerlink" href="#reprocess" title="Permalink to this headline">¶</a></h3>
<dl class="option">
<dt id="cmdoption-scmag-static">
<code class="sig-name descname">--static</code><code class="sig-prename descclassname"></code><a class="headerlink" href="#cmdoption-scmag-static" title="Permalink to this definition">¶</a></dt>
<dd><p>With that flag all existing station magnitudes are recomputed
based on their associated amplitudes. If an amplitude cannot
be accessed, no station magnitude is updated.
Network magnitudes are recomputed based on their station
magnitude contributions. No new objects will
be created in this mode, it only updates values and weights.
The method to accumulate the station magnitudes to form the network
magnitude will be read from the existing object and replicated.
If it cannot be interpreted then the configured default for this
magnitude type will be used instead. Weights of station magnitudes
will be changed according to the accumulation method of the
network magnitude.</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-scmag-keep-weights">
<code class="sig-name descname">--keep-weights</code><code class="sig-prename descclassname"></code><a class="headerlink" href="#cmdoption-scmag-keep-weights" title="Permalink to this definition">¶</a></dt>
<dd><p>Keep the original weights in combination with –static.</p>
</dd></dl>

</div>
</div>
</div>


          <div id="anchors-bottom"></div>
        </div>
        
      <div class="sidebar" role="navigation" aria-label="main navigation">
        <div id="anchors-top"></div>
        <div id="anchors" class="content">
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
  <h3><a href="../index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">scmag</a><ul>
<li><a class="reference internal" href="#description">Description</a><ul>
<li><a class="reference internal" href="#relationship-between-amplitudes-and-origins">Relationship between amplitudes and origins</a></li>
<li><a class="reference internal" href="#primary-magnitudes">Primary magnitudes</a></li>
<li><a class="reference internal" href="#local-distances">Local distances</a></li>
<li><a class="reference internal" href="#teleseismic-distances">Teleseismic distances</a></li>
<li><a class="reference internal" href="#derived-magnitudes">Derived magnitudes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#station-magnitudes">Station magnitudes</a></li>
<li><a class="reference internal" href="#network-magnitudes">Network magnitudes</a></li>
<li><a class="reference internal" href="#summary-magnitude">Summary magnitude</a></li>
<li><a class="reference internal" href="#preferred-magnitude">Preferred Magnitude</a></li>
<li><a class="reference internal" href="#module-configuration">Module Configuration</a></li>
<li><a class="reference internal" href="#command-line-options">Command-Line Options</a><ul>
<li><a class="reference internal" href="#generic">Generic</a></li>
<li><a class="reference internal" href="#verbosity">Verbosity</a></li>
<li><a class="reference internal" href="#messaging">Messaging</a></li>
<li><a class="reference internal" href="#database">Database</a></li>
<li><a class="reference internal" href="#input">Input</a></li>
<li><a class="reference internal" href="#reprocess">Reprocess</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="scevent.html"
                        title="previous chapter">scevent</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="scqc.html"
                        title="next chapter">scqc</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/apps/scmag.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
        </div>
      </div>
      </div>
    </div>
    <div class="footer">
      <div class="container">
        <div class="horizontal layout content">
        <a class="fade-in" href="https://www.gempa.de" target="_blank">
          <img class="brand" src="../_static/brands/gempa.svg"/>
        </a>
        <div class="stretched align-center fitted content">
          <div>
		  Version <b>5.5.3</b> Release
          </div>
            <div class="copyright">
              Copyright &copy; gempa GmbH, GFZ Potsdam.
            </div>
        </div>
        <a class="fade-in" href="https://www.gfz-potsdam.de" target="_blank">
          <img class="brand" src="../_static/brands/gfz.svg"/>
        </a>
        </div>
      </div>
    </div>
  </body>
</html>