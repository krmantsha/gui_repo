<!DOCTYPE html>

<html  lang="en">
  <head>
    <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>RecordStream &#8212; SeisComP Release documentation</title>
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/seiscomp.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=72bcf2f2" />
    <link rel="stylesheet" type="text/css" href="../_static/seiscomp.css?v=c6da7ce6" />
    <link rel="stylesheet" type="text/css" href="../_static/graphviz.css?v=eafc0fe6" />
    <script type="text/javascript" src="../_static/seiscomp.js"></script>
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js?v=823bb831"></script>
    <script src="../_static/doctools.js?v=888ff710"></script>
    <script src="../_static/sphinx_highlight.js?v=4825356b"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="FX-DFX" href="global_fx-dfx.html" />
    <link rel="prev" title="GUI" href="global_gui.html" /> 
  </head>
  <body>
    <div class="header">
      <div class="container">
        <div class="brand">
          <img class="logo" src="../_static/brands/seiscomp/text/white.svg"/>
           <!-- span class="title">SeisComP Release</span -->
          <span class="version">6.1.1</span>
        </div>
      </div>
    </div>
    <div class="nav">
      <div class="container">
        <div class="content"><a class="pull-right" id="sidebar-toggle">TOC</a>
          
    <div class="related" role="navigation" aria-label="related navigation">
      <ul>
        <li class="right">
          <a href="../genindex.html" title="General Index"
             accesskey="I">
            index
          </a>
        </li>
        <li class="right">
          <a href="global_fx-dfx.html" title="FX-DFX"
             accesskey="N">
            next
          </a>
        </li>
        <li class="right">
          <a href="global_gui.html" title="GUI"
             accesskey="P">
            previous
          </a>
        </li>
        <li class="nav-item nav-item-0">
          <a href="../index.html">Home</a>
        </li>
        <li class="nav-item nav-item-1">
          <a href="../toc/extensions.html" >Extensions</a>
        </li>
        <li class="nav-item nav-item-2">
          <a href="../toc/extensions/global.html" accesskey="U">global</a>
        </li> 
      </ul>
    </div>
        </div>
      </div>
    </div>
    <div class="container">
      <div class="fitted content" id="anchors-container">
        <div class="body" role="main">
          
  <section id="recordstream">
<span id="global-recordstream"></span><h1>RecordStream<a class="headerlink" href="#recordstream" title="Permalink to this heading">¶</a></h1>
<p>RecordStream interface for SeisComP.</p>
<section id="description">
<h2>Description<a class="headerlink" href="#description" title="Permalink to this heading">¶</a></h2>
<p><cite>SeisComP</cite> applications access waveform data through the RecordStream interface.
The following tables lists available implementations:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>URL Scheme(s)</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><a class="reference internal" href="#rs-arclink"><span class="std std-ref">ArcLink</span></a></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">arclink</span></code></p></td>
<td><p>Connects to an ArcLink server</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#rs-balanced"><span class="std std-ref">Balanced</span></a></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">balanced</span></code></p></td>
<td><p>Distributes requests to multiple proxy streams</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#rs-routing"><span class="std std-ref">Routing</span></a></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">routing</span></code></p></td>
<td><p>Distributes requests to multiple proxy streams according to user defined rules</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#rs-caps"><span class="std std-ref">CAPS</span></a></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">caps</span></code>, <code class="docutils literal notranslate"><span class="pre">capss</span></code></p></td>
<td><p>Connects to a <a class="reference external" href="https://www.gempa.de/products/caps/">gempa CAPS server</a></p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#rs-combined"><span class="std std-ref">Combined</span></a></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">combined</span></code></p></td>
<td><p>Combines archive and real-time stream</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#rs-dec"><span class="std std-ref">Decimation</span></a></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">dec</span></code></p></td>
<td><p>Decimates (downsamples) a proxy stream</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#rs-fdsnws"><span class="std std-ref">FDSNWS</span></a></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">fdsnws</span></code>, <code class="docutils literal notranslate"><span class="pre">fdsnwss</span></code></p></td>
<td><p>Connects to <a class="reference internal" href="fdsnws.html#fdsnws"><span class="std std-ref">FDSN web service</span></a></p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#rs-file"><span class="std std-ref">File</span></a></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">file</span></code></p></td>
<td><p>Reads records from file</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#rs-memory"><span class="std std-ref">Memory</span></a></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">memory</span></code></p></td>
<td><p>Reads records from memory</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#rs-resample"><span class="std std-ref">Resample</span></a></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">resample</span></code></p></td>
<td><p>Resamples (up or down) a proxy stream to a given sampling rate</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#rs-sdsarchive"><span class="std std-ref">SDSArchive</span></a></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">sdsarchive</span></code></p></td>
<td><p>Reads records from <cite>SeisComP</cite> archive (<a class="reference internal" href="../base/glossary.html#term-SDS"><span class="xref std std-term">SDS</span></a>)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#rs-slink"><span class="std std-ref">SeedLink</span></a></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">slink</span></code></p></td>
<td><p>Connects to <a class="reference internal" href="seedlink.html#seedlink"><span class="std std-ref">SeedLink server</span></a></p></td>
</tr>
</tbody>
</table>
</section>
<section id="application">
<h2>Application<a class="headerlink" href="#application" title="Permalink to this heading">¶</a></h2>
<p>The RecordStream parameters considered by an application are provided as a <em>URL</em>
in 2 alternative ways:</p>
<ul class="simple">
<li><p>Specification of the <em>URL</em> on the command line. Use the option <code class="docutils literal notranslate"><span class="pre">-I</span> <span class="pre">URL</span></code></p></li>
<li><p>Configuration of the <em>URL</em> using the global parameter <a class="reference internal" href="global.html#confval-recordstream"><code class="xref std std-confval docutils literal notranslate"><span class="pre">recordstream</span></code></a>.</p></li>
</ul>
<p>The URL scheme defines the specific RecordStream implementation. If the scheme
is omitted, the <a class="reference internal" href="#rs-file"><span class="std std-ref">File</span></a> implementation is used as default.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Older SeisComP versions used to split the URL into the parameters
<code class="xref std std-confval docutils literal notranslate"><span class="pre">recordstream.service</span></code> and <code class="xref std std-confval docutils literal notranslate"><span class="pre">recordstream.source</span></code>.
These parameters are not being used anymore.</p>
</div>
</section>
<section id="implementations">
<h2>Implementations<a class="headerlink" href="#implementations" title="Permalink to this heading">¶</a></h2>
<section id="seedlink">
<span id="rs-slink"></span><h3>SeedLink<a class="headerlink" href="#seedlink" title="Permalink to this heading">¶</a></h3>
<p>This RecordStream fetches data from a SeedLink server.</p>
<section id="definition">
<h4>Definition<a class="headerlink" href="#definition" title="Permalink to this heading">¶</a></h4>
<p>URL: <code class="docutils literal notranslate"><span class="pre">slink://[host][:port][?parameter]</span></code></p>
<p>The default host is set to <cite>localhost</cite>, the default port to <cite>18000</cite>. Optional
URL encoded parameters are:</p>
<ul class="simple">
<li><p><cite>timeout</cite> - connection timeout in seconds, default: 300</p></li>
<li><p><cite>retries</cite> - number of connection retry attempts, default: -1</p></li>
<li><p><cite>no-batch</cite> - disables BATCH mode to request data, does not take a value</p></li>
</ul>
</section>
<section id="examples">
<h4>Examples<a class="headerlink" href="#examples" title="Permalink to this heading">¶</a></h4>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">slink://</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">slink://geofon.gfz-potsdam.de?timeout=60&amp;retries=5</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">slink://localhost:18000</span></code></p></li>
</ul>
</section>
</section>
<section id="arclink">
<span id="rs-arclink"></span><h3>ArcLink<a class="headerlink" href="#arclink" title="Permalink to this heading">¶</a></h3>
<p>This RecordStream fetches data from a ArcLink server.</p>
<section id="id1">
<h4>Definition<a class="headerlink" href="#id1" title="Permalink to this heading">¶</a></h4>
<p>URL: <code class="docutils literal notranslate"><span class="pre">arclink://[host][:port][?parameters]</span></code></p>
<p>The default host is set to <cite>localhost</cite>, the default port to <cite>18001</cite>. Optional
URL encoded parameters are:</p>
<ul class="simple">
<li><p><cite>user</cite> - user name required on some servers</p></li>
<li><p><cite>pwd</cite> - password required on some servers</p></li>
<li><p><cite>dump</cite> - optional output file for all records being received</p></li>
</ul>
</section>
<section id="id2">
<h4>Examples<a class="headerlink" href="#id2" title="Permalink to this heading">¶</a></h4>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">arclink://</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">arclink://geofon.gfz-potsdam.de?user=foo&amp;pwd=secret</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">arclink://localhost:18042</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">arclink://localhost?dump=test.mseed</span></code></p></li>
</ul>
</section>
</section>
<section id="fdsnws">
<span id="rs-fdsnws"></span><h3>FDSNWS<a class="headerlink" href="#fdsnws" title="Permalink to this heading">¶</a></h3>
<p>This RecordStream fetches data from a FDSN web service.</p>
<section id="id3">
<h4>Definition<a class="headerlink" href="#id3" title="Permalink to this heading">¶</a></h4>
<p>URL: <code class="docutils literal notranslate"><span class="pre">fdsnws[s]://host[:port][path]</span></code></p>
<p>The host is a mandatory parameter. The default port depends on the URL scheme
used:</p>
<ul class="simple">
<li><p><cite>fdsnws</cite>: <cite>80</cite> (HTTP)</p></li>
<li><p><cite>fdsnwss</cite>: <cite>443</cite> (HTTPS)</p></li>
</ul>
<p>The default path is set to <cite>/fdsnws/dataselect/1/query</cite>. If a path is specified,
it needs to be complete up until the <cite>query</cite> resource.</p>
<p>Authentication via the <cite>queryauth</cite> resource is currently not supported.</p>
</section>
<section id="id4">
<h4>Examples<a class="headerlink" href="#id4" title="Permalink to this heading">¶</a></h4>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">fdsnws://service.iris.edu</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">fdsnws://service.iris.edu:80/fdsnws/dataselect/1/query</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">fdsnwss://geofon.gfz-potsdam.de</span></code></p></li>
</ul>
</section>
</section>
<section id="file">
<span id="rs-file"></span><h3>File<a class="headerlink" href="#file" title="Permalink to this heading">¶</a></h3>
<p>This RecordStream reads data from a file.</p>
<section id="id5">
<h4>Definition<a class="headerlink" href="#id5" title="Permalink to this heading">¶</a></h4>
<p>URL: <code class="docutils literal notranslate"><span class="pre">file://path</span></code></p>
<p>The path may be a absolute or relative path to a file. Environment variables
are <strong>not</strong> resolved. If path is set to <code class="docutils literal notranslate"><span class="pre">-</span></code> the data is read from <cite>stdin</cite>.</p>
<p>Supported files types are:</p>
<ul class="simple">
<li><p>miniSEED</p></li>
<li><p>SAC</p></li>
<li><p>XML</p></li>
<li><p>binary</p></li>
</ul>
<p>By default the record type is set to <cite>mseed</cite>. SAC data can be read using the <em>#sac</em>
descriptor. If a file name extension is available, then the record type is set as
follows:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Extension</p></th>
<th class="head"><p>Record Type</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><cite>*.xml</cite></p></td>
<td><p><cite>xml</cite></p></td>
</tr>
<tr class="row-odd"><td><p><cite>*.bin</cite></p></td>
<td><p><cite>binary</cite></p></td>
</tr>
<tr class="row-even"><td><p><cite>*.mseed</cite></p></td>
<td><p><cite>mseed</cite></p></td>
</tr>
</tbody>
</table>
<p>Optional descriptor:</p>
<ul class="simple">
<li><p><cite>sac</cite> - input data are in SAC format.</p></li>
</ul>
</section>
<section id="id6">
<h4>Examples<a class="headerlink" href="#id6" title="Permalink to this heading">¶</a></h4>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">file://-</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">file:///tmp/input.mseed</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">file:///tmp/input.sac#sac</span></code></p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>When defining the File RecordStream on the command line using the option <cite>-I</cite>,
the file name can also be passed without the URL scheme, e.g.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">-</span><span class="n">I</span> <span class="o">-</span>
<span class="o">-</span><span class="n">I</span> <span class="o">/</span><span class="n">tmp</span><span class="o">/</span><span class="nb">input</span><span class="o">.</span><span class="n">mseed</span>
</pre></div>
</div>
</div>
</section>
</section>
<section id="sdsarchive">
<span id="rs-sdsarchive"></span><h3>SDSArchive<a class="headerlink" href="#sdsarchive" title="Permalink to this heading">¶</a></h3>
<p>This RecordStream reads data from one or more <cite>SeisComP</cite> (<a class="reference internal" href="../base/glossary.html#term-SDS"><span class="xref std std-term">SDS</span></a>) archives using the
<a class="reference internal" href="#rs-file"><span class="std std-ref">File</span></a> RecordStream.</p>
<section id="id7">
<h4>Definition<a class="headerlink" href="#id7" title="Permalink to this heading">¶</a></h4>
<p>URL: <code class="docutils literal notranslate"><span class="pre">sdsarchive://[path[,path2[,</span> <span class="pre">...]]]</span></code></p>
<p>The default path is set to <cite>$SEISCOMP_ROOT/var/lib/archive</cite>.</p>
<p>In contrast to a formal URL definition, the URL path is interpreted as a directory path list
separated by commas.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>When defining multiple directories separated by comma in a configuration
file, please enclose the entire definition (including <code class="docutils literal notranslate"><span class="pre">sdsarchive://</span></code> with
double quotes. Otherwise the configuration parser will interpret it as a list
and will only return the first part up to the first comma.</p>
</div>
<p>Different SDS archives are not merged, but are read sequentially depending on
data existence. If a requested file is missing in the current SDS archive, it is
searched for in the archive next in the list. On success it will deliver all
the rest of files for the current channel from this SDS archive. On failure the
next SDS archive is searched.</p>
<p>This process is repeated for each requested channel individually. It always
starts to search data from the first given SDS to the last one, for each data
channel.</p>
</section>
<section id="id8">
<h4>Examples<a class="headerlink" href="#id8" title="Permalink to this heading">¶</a></h4>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">sdsarchive://</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">sdsarchive:///home/sysop/seiscomp/var/lib/archive</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">sdsarchive:///SDSA,/SDSB,/SDSC</span></code></p></li>
</ul>
</section>
</section>
<section id="caps">
<span id="rs-caps"></span><h3>CAPS<a class="headerlink" href="#caps" title="Permalink to this heading">¶</a></h3>
<p>This RecordStream reads data from a
<a class="reference external" href="https://www.gempa.de/products/caps/">gempa CAPS server</a>.</p>
<section id="id10">
<h4>Definition<a class="headerlink" href="#id10" title="Permalink to this heading">¶</a></h4>
<p>URL: <code class="docutils literal notranslate"><span class="pre">caps[s]://[user:pass&#64;][host[:port]][?parameters]</span></code></p>
<p>The default host is set to <cite>localhost</cite>. The default port depends on the URL scheme
used:</p>
<ul class="simple">
<li><p><cite>caps</cite>: <cite>18002</cite></p></li>
<li><p><cite>capss</cite>: <cite>18022</cite> (SSL)</p></li>
</ul>
<p>Optional URL encoded parameters are:</p>
<ul class="simple">
<li><dl class="simple">
<dt><cite>arch</cite> - No parameter. Retrieve only archived data. In this mode the connection</dt><dd><p>finished when all available data has been sent. It won’t wait for additional
real-time data.</p>
</dd>
</dl>
</li>
<li><p><cite>ooo</cite> - Allow out-of-order data</p></li>
<li><p><cite>timeout</cite> - The socket timeout in seconds</p></li>
<li><dl class="simple">
<dt><cite>user</cite> - <strong>Deprecated:</strong> The user name of an authenticated request. Please use</dt><dd><p>the standard URL userinfo in front of the host instead.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><cite>pwd</cite> - <strong>Deprecated:</strong> The password of an authenticated request. Please use</dt><dd><p>the standard URL userinfo in front of the host instead.</p>
</dd>
</dl>
</li>
<li><p><cite>request-file</cite> - Use the given file to feed the request</p></li>
</ul>
</section>
<section id="example">
<h4>Example<a class="headerlink" href="#example" title="Permalink to this heading">¶</a></h4>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">caps://</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">caps://localhost:18002</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">capss://localhost:18022</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">caps://localhost:18002?arch</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">capss://user:mysecret&#64;localhost</span></code></p></li>
</ul>
</section>
</section>
<section id="memory">
<span id="rs-memory"></span><h3>Memory<a class="headerlink" href="#memory" title="Permalink to this heading">¶</a></h3>
<p>This RecordStream reads data from memory and is only useful for developing
applications. For instance a record sequence stored in an internal buffer could
be passed to an instance of this RecordStream for reading.</p>
</section>
<section id="combined">
<span id="rs-combined"></span><h3>Combined<a class="headerlink" href="#combined" title="Permalink to this heading">¶</a></h3>
<p>This RecordStream combines one archive and one real-time RecordStream, e.g.
<a class="reference internal" href="#rs-arclink"><span class="std std-ref">ArcLink</span></a> and <a class="reference internal" href="#rs-slink"><span class="std std-ref">SeedLink</span></a>. First the archive stream is read up to
the size of the real-time buffer. Then the acquisition is switched to the
real-time stream. The syntax for the source is similar to an URL:</p>
<section id="id11">
<h4>Definition<a class="headerlink" href="#id11" title="Permalink to this heading">¶</a></h4>
<p>URL-like: <code class="docutils literal notranslate"><span class="pre">combined://[real-time-stream];[archive-stream][??parameters]</span></code></p>
<p>By default the real-time stream is set to <a class="reference internal" href="#rs-slink"><span class="std std-ref">SeedLink</span></a> and the
archive-stream is set to <a class="reference internal" href="#rs-arclink"><span class="std std-ref">ArcLink</span></a>. Any other streams may be configured.</p>
<p>The definition of the proxy streams has slightly changed: Scheme and source are
only separated by a slash, e.g. <cite>slink://localhost</cite> needs to be defined as
<cite>slink/localhost</cite>.</p>
<p>The URL parameters of the combined stream are separated by 2 question marks
(<cite>??</cite>) in order to distinguish them from the parameters used in the proxy
streams:</p>
<ul>
<li><p><cite>slinkMax|rtMax|1stMax</cite> - Buffer size in seconds of the first stream
(typically the real-time stream), default: 3600</p>
<p>Time spans can be configured with an additional and optional suffix:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Suffix</p></th>
<th class="head"><p>Multiplicator</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>s</p></td>
<td><p>1</p></td>
</tr>
<tr class="row-odd"><td><p>m</p></td>
<td><p>60</p></td>
</tr>
<tr class="row-even"><td><p>h</p></td>
<td><p>3600</p></td>
</tr>
<tr class="row-odd"><td><p>d</p></td>
<td><p>86400</p></td>
</tr>
<tr class="row-even"><td><p>w</p></td>
<td><p>86400*7</p></td>
</tr>
</tbody>
</table>
</li>
<li><p><cite>splitTime</cite> - The absolute time of the separation of both sources. The argument
is an ISO time string, e.g. 2018-05-10T12:00:00Z or a year, e.g. 2018, which is
the same as 2018-01-01T00:00:00.000Z.
<cite>splitTime</cite> can be used if the waveform archives are spread over several
directories or hard disks. See also the <a class="reference internal" href="#rs-splittime"><span class="std std-ref">examples</span></a>.</p></li>
</ul>
<p>The combined record stream may be nested allowing the configuration of a
(theoretically) infinite number of archive streams. The URL syntax for a nested
configuration uses parenthesis:</p>
<p><code class="docutils literal notranslate"><span class="pre">combined://real-time-stream;combined/(archive-stream1;archive-stream2??parameters)??parameters</span></code></p>
</section>
<section id="rs-splittime">
<span id="id12"></span><h4>Examples<a class="headerlink" href="#rs-splittime" title="Permalink to this heading">¶</a></h4>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>URL</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">combined://localhost:18000;localhost:18001</span></code></p></td>
<td><p>Seedlink on localhost:18000 combined with Arclink on localhost 18001</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">combined://slink/localhost:18000;arclink/localhost:18001</span></code></p></td>
<td><p>Same as above</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">combined://;</span></code></p></td>
<td><p>Same as above</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">combined://:18042;?user=foo&amp;pwd=secret??rtMax=1800</span></code></p></td>
<td><p>Seedlink on localhost:18042 combined with Arclink on localhost 18001, real-time (SeedLink) buffer size set to 30min</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">combined://slink/localhost:18000;sdsarchive//home/sysop/seiscomp/var/lib/archive</span></code></p></td>
<td><p>Seedlink combined with SDS archive</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">combined://slink/localhost:18000;combined/(arclink/localhost:18001;arclink/localhost:18002??1stMax=30d)??1stMax=1h</span></code></p></td>
<td><p>Seedlink combined with a combined record stream using two Arclink sources</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">combined://slink/localhost:18000;combined/(sdsarchive//home/sysop/seiscomp/var/lib/archive;combined/(sdsarchive//home/sysop/seiscomp/var/lib/archive2017;sdsarchive//home/sysop/seiscomp/var/lib/archive2016??splitTime=2017)??splitTime=2018)</span></code></p></td>
<td><p>Seedlink combined with a combined recordStream providing access to 3 different SDS archives separated by time. The first SDS archive contains the most recent archived data. The other two contain the data from 2016 and 2017.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">combined://slink/localhost:18000;combined/(sdsarchive//home/sysop/seiscomp/var/lib/archive;combined/(sdsarchive//home/sysop/seiscomp/var/lib/archive2017;sdsarchive//home/sysop/seiscomp/var/lib/archive2016??splitTime=2017-06-01T00:00:00Z)??splitTime=2018-06-01T00:00:00Z)</span></code></p></td>
<td><p>Seedlink combined with a combined recordStream providing access to 3 different SDS archives separated by time. The first SDS archive contains the most recent archived data. The other two are separated in mid of 2016.</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="balanced">
<span id="rs-balanced"></span><h3>Balanced<a class="headerlink" href="#balanced" title="Permalink to this heading">¶</a></h3>
<p>This RecordStream distributes requests quasi-equally (but deterministically) to
multiple proxy streams. It can be used for load balancing and to improve failure
tolerance. The algorithm to choose a proxy stream (counting from 0) is based on
station code and can be expressed in Python as follows:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">stationCode</span> <span class="o">=</span> <span class="s2">&quot;WLF&quot;</span>
<span class="n">nproxies</span> <span class="o">=</span> <span class="mi">2</span>

<span class="n">x</span> <span class="o">=</span> <span class="mi">0</span>
<span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">stationCode</span><span class="p">:</span>
    <span class="n">x</span> <span class="o">+=</span> <span class="nb">ord</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;choosing proxy stream&quot;</span><span class="p">,</span> <span class="n">x</span> <span class="o">%</span> <span class="n">nproxies</span><span class="p">)</span>
</pre></div>
</div>
<section id="id13">
<h4>Definition<a class="headerlink" href="#id13" title="Permalink to this heading">¶</a></h4>
<p>URL-like: <code class="docutils literal notranslate"><span class="pre">balanced://proxy-stream[;proxy-stream2[;</span> <span class="pre">...]]</span></code></p>
<p>The definition of the proxy streams has slightly changed: Scheme and source
are only separated by a slash, e.g. <cite>slink://localhost</cite> needs to be defined as
<cite>slink/localhost</cite>.</p>
</section>
<section id="id14">
<h4>Examples<a class="headerlink" href="#id14" title="Permalink to this heading">¶</a></h4>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>URL</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">balanced://slink/server1:18000;slink/server2:18000</span></code></p></td>
<td><p>Distribute requests to 2 <a class="reference internal" href="#rs-slink"><span class="std std-ref">SeedLink</span></a> RecordStreams</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">balanced://combined/(server1:18000;server1:18001);combined/(server2:18000;server2:18001)</span></code></p></td>
<td><p>Distribute requests to 2 <a class="reference internal" href="#rs-combined"><span class="std std-ref">Combined</span></a> RecordStreams</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="routing">
<span id="rs-routing"></span><h3>Routing<a class="headerlink" href="#routing" title="Permalink to this heading">¶</a></h3>
<p>This RecordStream distributes requests to multiple proxy streams according to
user supplied routing rules, which allow to route specific network, station,
location or channel codes to fixed proxy streams.</p>
<section id="id15">
<h4>Definition<a class="headerlink" href="#id15" title="Permalink to this heading">¶</a></h4>
<p>URL-like: <code class="docutils literal notranslate"><span class="pre">routing://proxy-stream??match=pattern[;proxy-stream2??match=pattern[;</span> <span class="pre">...]]</span></code></p>
<p>The definition of the proxy streams has slightly changed: Scheme and source
are only separated by a slash, e.g. <cite>slink://localhost</cite> needs to be defined as
<cite>slink/localhost</cite>.</p>
<p>The URL parameters of the routing stream are separated by 2 question marks
(<cite>??</cite>) in order to distinguish them from the parameters used in the proxy
streams.</p>
<p><cite>pattern</cite> defines the rule used to route the request to the proxy stream and it is
in <cite>NET.STA.LOC.CHA</cite> format. The special characters <cite>?</cite> <cite>*</cite> <cite>|</cite> <cite>(</cite> <cite>)</cite> are allowed.</p>
</section>
<section id="id16">
<h4>Examples<a class="headerlink" href="#id16" title="Permalink to this heading">¶</a></h4>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>URL</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">routing://slink/server1:18000??match=(NET1|NET2).*.*.*;slink/server2:18000??match=*.*.*.*</span></code></p></td>
<td><p>Requests for network <cite>NET1</cite> and <cite>NET2</cite> go to server1, all the rest to server2</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">routing://slink/server1:18000??match=TMP?.*.*.*;slink/server2:18000??match=NET.*.*.*</span></code></p></td>
<td><p>Requests for network <cite>TMPX</cite> go to server1, for network <cite>NET</cite> go to server 2, all the rest are not fulfilled</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">routing://slink/server1:18000??match=*.*.*.(HH|EH)?;slink/server2:18000??match=*.*.*.*</span></code></p></td>
<td><p>Requests for channels <cite>HH</cite> and <cite>EH</cite> go to server1, all the rest to server2</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">routing://combined/(server1:18000;server1:18001??rtMax=1800)??match=NET1.*.*.*;combined/(server2:18000;server2:18001??rtMax=1800)??match=NET2.*.*.*</span></code></p></td>
<td><p>Split requests to 2 <a class="reference internal" href="#rs-combined"><span class="std std-ref">Combined</span></a> RecordStreams according to the network code <cite>STA1</cite> or <cite>STA2</cite>. Other network codes are not fullfilled</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">routing://combined/(slink/special-server:18000;sdsarchive//home/sysop/seiscomp/var/lib/special-archive)??match=SP.*.*.*;combined/(slink/default-server:18000;sdsarchive//home/sysop/seiscomp/var/lib/default-archive)??match=*.*.*.*</span></code></p></td>
<td><p>Requests for special network <cite>SP</cite> are fullfilled by seedlink <cite>special-server</cite> and sdsarchive <cite>/home/sysop/seiscomp/var/lib/special-archive</cite>, all the rest are fullfilled by seedlink <cite>default-server</cite> and archive <cite>/home/sysop/seiscomp/var/lib/default-archive</cite></p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="decimation">
<span id="rs-dec"></span><h3>Decimation<a class="headerlink" href="#decimation" title="Permalink to this heading">¶</a></h3>
<p>This RecordStream decimates (downsamples) a proxy stream, e.g. <a class="reference internal" href="#rs-slink"><span class="std std-ref">SeedLink</span></a>.</p>
<section id="id17">
<h4>Definition<a class="headerlink" href="#id17" title="Permalink to this heading">¶</a></h4>
<p>URL-like: <code class="docutils literal notranslate"><span class="pre">dec://proxy-stream-scheme[?dec-parameters]/[proxy-stream-source]</span></code></p>
<p>The definition of the proxy streams has slightly changed: Scheme and source are
only separated by a slash, e.g. <cite>slink://localhost</cite> needs to be defined as
<cite>slink/localhost</cite>. Also optional decimation parameters directly follow the proxy
stream scheme.</p>
<p>Optional decimation parameters are:</p>
<ul class="simple">
<li><p><cite>rate</cite> - target sampling rate in Hz, default: 1</p></li>
<li><p><cite>fp</cite> - default: 0.7</p></li>
<li><p><cite>fs</cite> - default: 0.9</p></li>
<li><p><cite>cs</cite> - coefficient scale, default: 10</p></li>
</ul>
</section>
<section id="id18">
<h4>Examples<a class="headerlink" href="#id18" title="Permalink to this heading">¶</a></h4>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">dec://slink/localhost:18000</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">dec://file?rate=2/-</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">dec://combined/;</span></code></p></li>
</ul>
</section>
</section>
<section id="resample">
<span id="rs-resample"></span><h3>Resample<a class="headerlink" href="#resample" title="Permalink to this heading">¶</a></h3>
<p>This RecordStream resamples (up or down) a proxy stream, e.g. <a class="reference internal" href="#rs-slink"><span class="std std-ref">SeedLink</span></a>,
to a given sampling rate.</p>
<section id="id19">
<h4>Definition<a class="headerlink" href="#id19" title="Permalink to this heading">¶</a></h4>
<p>URL-like: <code class="docutils literal notranslate"><span class="pre">resample://proxy-stream-scheme[?dec-parameters]/[proxy-stream-source]</span></code></p>
<p>The definition of the proxy streams has slightly changed: Scheme and source are
only separated by a slash, e.g. <cite>slink://localhost</cite> needs to be defined as
<cite>slink/localhost</cite>. Also optional decimation parameters directly follow the proxy
stream scheme.</p>
<p>Optional resample parameters are:</p>
<ul class="simple">
<li><p><cite>rate</cite> - target sampling rate in Hz, default: 1</p></li>
<li><p><cite>fp</cite> - default: 0.7</p></li>
<li><p><cite>fs</cite> - default: 0.9</p></li>
<li><p><cite>cs</cite> - coefficient scale, default: 10</p></li>
<li><p><cite>lw</cite> - lanczos kernel width, default: 3</p></li>
<li><p><cite>debug</cite> - enables debug output, default: false</p></li>
</ul>
</section>
<section id="id20">
<h4>Examples<a class="headerlink" href="#id20" title="Permalink to this heading">¶</a></h4>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">resample://slink/localhost:18000</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">resample://file?rate=2/-</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">resample://combined/;</span></code></p></li>
</ul>
</section>
</section>
</section>
</section>


          <div id="anchors-bottom"></div>
        </div>
        
      <div class="sidebar" role="navigation" aria-label="main navigation">
        <div id="anchors-top"></div>
        <div id="anchors" class="content">
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>
  <div>
    <h3><a href="../index.html">Table of Contents</a></h3>
    <ul>
<li><a class="reference internal" href="#">RecordStream</a><ul>
<li><a class="reference internal" href="#description">Description</a></li>
<li><a class="reference internal" href="#application">Application</a></li>
<li><a class="reference internal" href="#implementations">Implementations</a><ul>
<li><a class="reference internal" href="#seedlink">SeedLink</a><ul>
<li><a class="reference internal" href="#definition">Definition</a></li>
<li><a class="reference internal" href="#examples">Examples</a></li>
</ul>
</li>
<li><a class="reference internal" href="#arclink">ArcLink</a><ul>
<li><a class="reference internal" href="#id1">Definition</a></li>
<li><a class="reference internal" href="#id2">Examples</a></li>
</ul>
</li>
<li><a class="reference internal" href="#fdsnws">FDSNWS</a><ul>
<li><a class="reference internal" href="#id3">Definition</a></li>
<li><a class="reference internal" href="#id4">Examples</a></li>
</ul>
</li>
<li><a class="reference internal" href="#file">File</a><ul>
<li><a class="reference internal" href="#id5">Definition</a></li>
<li><a class="reference internal" href="#id6">Examples</a></li>
</ul>
</li>
<li><a class="reference internal" href="#sdsarchive">SDSArchive</a><ul>
<li><a class="reference internal" href="#id7">Definition</a></li>
<li><a class="reference internal" href="#id8">Examples</a></li>
</ul>
</li>
<li><a class="reference internal" href="#caps">CAPS</a><ul>
<li><a class="reference internal" href="#id10">Definition</a></li>
<li><a class="reference internal" href="#example">Example</a></li>
</ul>
</li>
<li><a class="reference internal" href="#memory">Memory</a></li>
<li><a class="reference internal" href="#combined">Combined</a><ul>
<li><a class="reference internal" href="#id11">Definition</a></li>
<li><a class="reference internal" href="#rs-splittime">Examples</a></li>
</ul>
</li>
<li><a class="reference internal" href="#balanced">Balanced</a><ul>
<li><a class="reference internal" href="#id13">Definition</a></li>
<li><a class="reference internal" href="#id14">Examples</a></li>
</ul>
</li>
<li><a class="reference internal" href="#routing">Routing</a><ul>
<li><a class="reference internal" href="#id15">Definition</a></li>
<li><a class="reference internal" href="#id16">Examples</a></li>
</ul>
</li>
<li><a class="reference internal" href="#decimation">Decimation</a><ul>
<li><a class="reference internal" href="#id17">Definition</a></li>
<li><a class="reference internal" href="#id18">Examples</a></li>
</ul>
</li>
<li><a class="reference internal" href="#resample">Resample</a><ul>
<li><a class="reference internal" href="#id19">Definition</a></li>
<li><a class="reference internal" href="#id20">Examples</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

  </div>
  <div>
    <h4>Previous topic</h4>
    <p class="topless"><a href="global_gui.html"
                          title="previous chapter">GUI</a></p>
  </div>
  <div>
    <h4>Next topic</h4>
    <p class="topless"><a href="global_fx-dfx.html"
                          title="next chapter">FX-DFX</a></p>
  </div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/apps/global_recordstream.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
        </div>
      </div>
      </div>
    </div>
    <div class="footer">
      <div class="container">
        <div class="horizontal layout content">
        <a class="fade-in" href="https://www.gempa.de" target="_blank">
          <img class="brand" src="../_static/brands/gempa.svg"/>
        </a>
        <div class="stretched align-center fitted content">
          <div>
		  Version <b>6.1.1</b> Release
          </div>
            <div class="copyright">
              Copyright &copy; gempa GmbH, GFZ Potsdam.
            </div>
        </div>
        <a class="fade-in" href="https://www.gfz-potsdam.de" target="_blank">
          <img class="brand" src="../_static/brands/gfz.svg"/>
        </a>
        </div>
      </div>
    </div>
  </body>
</html>