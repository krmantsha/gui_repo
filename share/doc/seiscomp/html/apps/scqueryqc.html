<!DOCTYPE html>

<html >
  <head>
    <meta charset="utf-8" />
    <title>scqueryqc &#8212; SeisComP Release documentation</title>
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/seiscomp.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/graphviz.css" />
    <script type="text/javascript" src="../_static/seiscomp.js"></script>
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/language_data.js"></script>
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="scsendjournal" href="scsendjournal.html" />
    <link rel="prev" title="scquery" href="scquery.html" /> 
  </head>
  <body>
    <div class="header">
      <div class="container">
        <div class="brand">
          <img class="logo" src="../_static/brands/seiscomp/text/white.svg"/>
           <!-- span class="title">SeisComP Release</span -->
          <span class="version">5.5.3</span>
        </div>
      </div>
    </div>
    <div class="nav">
      <div class="container">
        <div class="content"><a class="pull-right" id="sidebar-toggle">TOC</a>
          
    <div class="related" role="navigation" aria-label="related navigation">
      <ul>
        <li class="right">
          <a href="../genindex.html" title="General Index"
             accesskey="I">
            index
          </a>
        </li>
        <li class="right">
          <a href="scsendjournal.html" title="scsendjournal"
             accesskey="N">
            next
          </a>
        </li>
        <li class="right">
          <a href="scquery.html" title="scquery"
             accesskey="P">
            previous
          </a>
        </li>
        <li class="nav-item nav-item-0">
          <a href="../index.html">Home</a>
        </li>
        <li class="nav-item nav-item-1">
          <a href="../modules.html" >Modules</a>
        </li>
        <li class="nav-item nav-item-2">
          <a href="../toc/utilities.html" accesskey="U">Utilities</a>
        </li> 
      </ul>
    </div>
        </div>
      </div>
    </div>
    <div class="container">
      <div class="fitted content" id="anchors-container">
        <div class="body" role="main">
          
  <div class="section" id="scqueryqc">
<span id="id1"></span><h1>scqueryqc<a class="headerlink" href="#scqueryqc" title="Permalink to this headline">¶</a></h1>
<p><strong>Query waveform quality control (QC) parameters from database.</strong></p>
<div class="section" id="description">
<h2>Description<a class="headerlink" href="#description" title="Permalink to this headline">¶</a></h2>
<p>scqueryqc queries a database for waveform quality control (QC) parameters. The
QC parameters must be provided, e.g. by <a class="reference internal" href="scqc.html#scqc"><span class="std std-ref">scqc</span></a>.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Writing QC parameters to the database by <a class="reference internal" href="scqc.html#scqc"><span class="std std-ref">scqc</span></a> will result in a rapidly
growing database and is therefore not recommended in permanent application!</p>
</div>
<p>The database query is done for</p>
<ul>
<li><p>One or multiple streams,</p></li>
<li><p>One or multiple QC parameters. All QC parameters can be requested. Defaults
apply. For reading the defaults use</p>
<div class="highlight-rst notranslate"><div class="highlight"><pre><span></span>scqueryqc -h
</pre></div>
</div>
</li>
<li><p>A single time window where the begin time must be provided. Current time is
considered if the end is not give.</p></li>
</ul>
<div class="section" id="workflow">
<h3>Workflow<a class="headerlink" href="#workflow" title="Permalink to this headline">¶</a></h3>
<p>You should minimize the impact of stored waveform QC parameters on the size of the
database.</p>
<ol class="arabic">
<li><p>Compute the QC parameters in real time using <a class="reference internal" href="scqc.html#scqc"><span class="std std-ref">scqc</span></a> and save them in the
<cite>SeisComP</cite> database. Saving the QC parameters in the database requires to
adjust the scqc module configuration parameters
<code class="docutils literal notranslate"><span class="pre">plugins.*.archive.interval</span></code> for each plugin.</p></li>
<li><p>Regularly use scqueryqc for some time span to read the QC parameters from the
database. Save them in a XML files.</p>
<p>Example for all QC parameters found for all streams in the inventory before
end time:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>scqueryqc -d <span class="o">[</span>host<span class="o">]</span> -e <span class="s1">&#39;[end time]&#39;</span> --streams-from-inventory -o <span class="o">[</span>XML file<span class="o">]</span>
</pre></div>
</div>
</li>
<li><p>Clean the database from QC parameters.</p>
<ul>
<li><p>Either use <a class="reference internal" href="scdispatch.html#scdispatch"><span class="std std-ref">scdispatch</span></a> with the parameters saved in XML. You may need
to set the routing table for sending the QualityControl parameters to the
right message group, e.g., QC:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>scdispatch -H <span class="o">[</span>host<span class="o">]</span> -O remove --routingtable QualityControl:QC -i <span class="o">[</span>XML file<span class="o">]</span>
</pre></div>
</div>
</li>
<li><p>Alternatively, use <a class="reference internal" href="scdbstrip.html#scdbstrip"><span class="std std-ref">scdbstrip</span></a> with the command-line option <code class="docutils literal notranslate"><span class="pre">-Q</span></code> and
remove <strong>all</strong> QC parameters in the time span. Use the same period for
which the QC parameters were retrieved:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>scdbstrip -d <span class="o">[</span>database<span class="o">]</span> -Q --date-time <span class="s1">&#39;[end time]&#39;</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Considering an end time by <code class="docutils literal notranslate"><span class="pre">--date-time</span></code> has the advantage that no QC
parameters are removed which were measured after scqueryqc was applied.</p>
</div>
</li>
</ul>
</li>
</ol>
</div>
<div class="section" id="examples">
<h3>Examples<a class="headerlink" href="#examples" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p>Query rms and delay values for the stream AU.AS18..SHZ,AU.AS19..SHZ before
‘2021-11-20 00:00:00’. Write the XML to stdout</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>scqueryqc -d localhost -e <span class="s1">&#39;2021-11-20 00:00:00&#39;</span> -p rms,delay -i AU.AS18..SHZ,AU.AS19..SHZ
</pre></div>
</div>
</li>
<li><p>Query all default QC parameter values for all streams found in the inventory
from ‘2021-11-20 00:00:00’ until current. Write the formatted XML output to
<code class="file docutils literal notranslate"><span class="pre">/tmp/query.xml</span></code></p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>scqueryqc -d localhost -b <span class="s1">&#39;2021-11-20 00:00:00&#39;</span> --streams-from-inventory -f -o /tmp/query.xml
</pre></div>
</div>
</li>
</ul>
</div>
</div>
<div class="section" id="module-configuration">
<span id="scqueryqc-configuration"></span><h2>Module Configuration<a class="headerlink" href="#module-configuration" title="Permalink to this headline">¶</a></h2>
<div class="line-block">
<div class="line"><code class="file docutils literal notranslate"><span class="pre">etc/defaults/global.cfg</span></code></div>
<div class="line"><code class="file docutils literal notranslate"><span class="pre">etc/defaults/scqueryqc.cfg</span></code></div>
<div class="line"><code class="file docutils literal notranslate"><span class="pre">etc/global.cfg</span></code></div>
<div class="line"><code class="file docutils literal notranslate"><span class="pre">etc/scqueryqc.cfg</span></code></div>
<div class="line"><code class="file docutils literal notranslate"><span class="pre">~/.seiscomp/global.cfg</span></code></div>
<div class="line"><code class="file docutils literal notranslate"><span class="pre">~/.seiscomp/scqueryqc.cfg</span></code></div>
</div>
<p>scqueryqc inherits <a class="reference internal" href="global.html#global-configuration"><span class="std std-ref">global options</span></a>.</p>
</div>
<div class="section" id="command-line-options">
<h2>Command-Line Options<a class="headerlink" href="#command-line-options" title="Permalink to this headline">¶</a></h2>
<p><strong class="program">scqueryqc [options]</strong></p>
<div class="section" id="generic">
<h3>Generic<a class="headerlink" href="#generic" title="Permalink to this headline">¶</a></h3>
<dl class="option">
<dt id="cmdoption-scqueryqc-h">
<code class="sig-name descname">-h</code><code class="sig-prename descclassname"></code><code class="sig-prename descclassname">, </code><code class="sig-name descname">--help</code><code class="sig-prename descclassname"></code><a class="headerlink" href="#cmdoption-scqueryqc-h" title="Permalink to this definition">¶</a></dt>
<dd><p>Show help message.</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-scqueryqc-v">
<code class="sig-name descname">-V</code><code class="sig-prename descclassname"></code><code class="sig-prename descclassname">, </code><code class="sig-name descname">--version</code><code class="sig-prename descclassname"></code><a class="headerlink" href="#cmdoption-scqueryqc-v" title="Permalink to this definition">¶</a></dt>
<dd><p>Show version information.</p>
</dd></dl>

</div>
<div class="section" id="verbosity">
<h3>Verbosity<a class="headerlink" href="#verbosity" title="Permalink to this headline">¶</a></h3>
<dl class="option">
<dt id="cmdoption-scqueryqc-verbosity">
<code class="sig-name descname">--verbosity</code><code class="sig-prename descclassname"> arg</code><a class="headerlink" href="#cmdoption-scqueryqc-verbosity" title="Permalink to this definition">¶</a></dt>
<dd><p>Verbosity level [0..4]. 0:quiet, 1:error, 2:warning, 3:info,
4:debug.</p>
</dd></dl>

<dl class="option">
<dt id="id2">
<code class="sig-name descname">-v</code><code class="sig-prename descclassname"></code><code class="sig-prename descclassname">, </code><code class="sig-name descname">--v</code><code class="sig-prename descclassname"></code><a class="headerlink" href="#id2" title="Permalink to this definition">¶</a></dt>
<dd><p>Increase verbosity level (may be repeated, eg. -vv).</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-scqueryqc-q">
<code class="sig-name descname">-q</code><code class="sig-prename descclassname"></code><code class="sig-prename descclassname">, </code><code class="sig-name descname">--quiet</code><code class="sig-prename descclassname"></code><a class="headerlink" href="#cmdoption-scqueryqc-q" title="Permalink to this definition">¶</a></dt>
<dd><p>Quiet mode: no logging output.</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-scqueryqc-component">
<code class="sig-name descname">--component</code><code class="sig-prename descclassname"> arg</code><a class="headerlink" href="#cmdoption-scqueryqc-component" title="Permalink to this definition">¶</a></dt>
<dd><p>Limit the logging to a certain component. This option can
be given more than once.</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-scqueryqc-s">
<code class="sig-name descname">-s</code><code class="sig-prename descclassname"></code><code class="sig-prename descclassname">, </code><code class="sig-name descname">--syslog</code><code class="sig-prename descclassname"></code><a class="headerlink" href="#cmdoption-scqueryqc-s" title="Permalink to this definition">¶</a></dt>
<dd><p>Use syslog logging backend. The output usually goes to
/var/lib/messages.</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-scqueryqc-l">
<code class="sig-name descname">-l</code><code class="sig-prename descclassname"></code><code class="sig-prename descclassname">, </code><code class="sig-name descname">--lockfile</code><code class="sig-prename descclassname"> arg</code><a class="headerlink" href="#cmdoption-scqueryqc-l" title="Permalink to this definition">¶</a></dt>
<dd><p>Path to lock file.</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-scqueryqc-console">
<code class="sig-name descname">--console</code><code class="sig-prename descclassname"> arg</code><a class="headerlink" href="#cmdoption-scqueryqc-console" title="Permalink to this definition">¶</a></dt>
<dd><p>Send log output to stdout.</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-scqueryqc-debug">
<code class="sig-name descname">--debug</code><code class="sig-prename descclassname"></code><a class="headerlink" href="#cmdoption-scqueryqc-debug" title="Permalink to this definition">¶</a></dt>
<dd><p>Execute in debug mode.
Equivalent to –verbosity=4 –console=1 .</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-scqueryqc-log-file">
<code class="sig-name descname">--log-file</code><code class="sig-prename descclassname"> arg</code><a class="headerlink" href="#cmdoption-scqueryqc-log-file" title="Permalink to this definition">¶</a></dt>
<dd><p>Use alternative log file.</p>
</dd></dl>

</div>
<div class="section" id="database">
<h3>Database<a class="headerlink" href="#database" title="Permalink to this headline">¶</a></h3>
<dl class="option">
<dt id="cmdoption-scqueryqc-db-driver-list">
<code class="sig-name descname">--db-driver-list</code><code class="sig-prename descclassname"></code><a class="headerlink" href="#cmdoption-scqueryqc-db-driver-list" title="Permalink to this definition">¶</a></dt>
<dd><p>List all supported database drivers.</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-scqueryqc-d">
<code class="sig-name descname">-d</code><code class="sig-prename descclassname"></code><code class="sig-prename descclassname">, </code><code class="sig-name descname">--database</code><code class="sig-prename descclassname"> arg</code><a class="headerlink" href="#cmdoption-scqueryqc-d" title="Permalink to this definition">¶</a></dt>
<dd><p>The database connection string, format:
<a class="reference external" href="service://user:pwd&#64;host/database">service://user:pwd&#64;host/database</a>.
“service” is the name of the database driver which
can be queried with “–db-driver-list”.</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-scqueryqc-inventory-db">
<code class="sig-name descname">--inventory-db</code><code class="sig-prename descclassname"> arg</code><a class="headerlink" href="#cmdoption-scqueryqc-inventory-db" title="Permalink to this definition">¶</a></dt>
<dd><p>Load the inventory from the given database or file, format:
[<a class="reference external" href="service://]location">service://]location</a> .</p>
</dd></dl>

</div>
<div class="section" id="output">
<h3>Output<a class="headerlink" href="#output" title="Permalink to this headline">¶</a></h3>
<dl class="option">
<dt id="cmdoption-scqueryqc-o">
<code class="sig-name descname">-o</code><code class="sig-prename descclassname"></code><code class="sig-prename descclassname">, </code><code class="sig-name descname">--output</code><code class="sig-prename descclassname"> filename</code><a class="headerlink" href="#cmdoption-scqueryqc-o" title="Permalink to this definition">¶</a></dt>
<dd><p>Name of output XML file. Objects are sent to stderr if none
is given.</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-scqueryqc-f">
<code class="sig-name descname">-f</code><code class="sig-prename descclassname"></code><code class="sig-prename descclassname">, </code><code class="sig-name descname">--formatted</code><code class="sig-prename descclassname"></code><a class="headerlink" href="#cmdoption-scqueryqc-f" title="Permalink to this definition">¶</a></dt>
<dd><p>Write formatted XML.</p>
</dd></dl>

</div>
<div class="section" id="query">
<h3>Query<a class="headerlink" href="#query" title="Permalink to this headline">¶</a></h3>
<dl class="option">
<dt id="cmdoption-scqueryqc-b">
<code class="sig-name descname">-b</code><code class="sig-prename descclassname"></code><code class="sig-prename descclassname">, </code><code class="sig-name descname">--begin</code><code class="sig-prename descclassname"> time</code><a class="headerlink" href="#cmdoption-scqueryqc-b" title="Permalink to this definition">¶</a></dt>
<dd><p>Begin time of query. Format: ‘YYYY-MM-DD hh:mm:ss’.
‘1900-01-01T00:00:00Z’ is considered if undefined.</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-scqueryqc-e">
<code class="sig-name descname">-e</code><code class="sig-prename descclassname"></code><code class="sig-prename descclassname">, </code><code class="sig-name descname">--end</code><code class="sig-prename descclassname"> time</code><a class="headerlink" href="#cmdoption-scqueryqc-e" title="Permalink to this definition">¶</a></dt>
<dd><p>End time of query. Format: ‘YYYY-MM-DD hh:mm:ss’.
Current time is considered if undefined.</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-scqueryqc-i">
<code class="sig-name descname">-i</code><code class="sig-prename descclassname"></code><code class="sig-prename descclassname">, </code><code class="sig-name descname">--stream-id</code><code class="sig-prename descclassname"> string</code><a class="headerlink" href="#cmdoption-scqueryqc-i" title="Permalink to this definition">¶</a></dt>
<dd><p>Waveform stream ID to search for QC parameters: net.sta.loc.cha -
[networkCode].[stationCode].[sensorLocationCode].[channelCode].
Provide a single ID or a comma-separated list. Overrides
‘–streams-from-inventory’.</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-scqueryqc-p">
<code class="sig-name descname">-p</code><code class="sig-prename descclassname"></code><code class="sig-prename descclassname">, </code><code class="sig-name descname">--parameter</code><code class="sig-prename descclassname"> string</code><a class="headerlink" href="#cmdoption-scqueryqc-p" title="Permalink to this definition">¶</a></dt>
<dd><p>QC parameter to output: (e.g. delay,rms,’gaps count’ …).
Use quotes if QC parameter has more than 1 word.
Provide a single parameter or a comma-separated list.
Defaults are used if parameter is undefined.</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-scqueryqc-streams-from-inventory">
<code class="sig-name descname">--streams-from-inventory</code><code class="sig-prename descclassname"></code><a class="headerlink" href="#cmdoption-scqueryqc-streams-from-inventory" title="Permalink to this definition">¶</a></dt>
<dd><p>Read streams from inventory. Superseded by ‘–stream-id’.</p>
</dd></dl>

</div>
</div>
</div>


          <div id="anchors-bottom"></div>
        </div>
        
      <div class="sidebar" role="navigation" aria-label="main navigation">
        <div id="anchors-top"></div>
        <div id="anchors" class="content">
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
  <h3><a href="../index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">scqueryqc</a><ul>
<li><a class="reference internal" href="#description">Description</a><ul>
<li><a class="reference internal" href="#workflow">Workflow</a></li>
<li><a class="reference internal" href="#examples">Examples</a></li>
</ul>
</li>
<li><a class="reference internal" href="#module-configuration">Module Configuration</a></li>
<li><a class="reference internal" href="#command-line-options">Command-Line Options</a><ul>
<li><a class="reference internal" href="#generic">Generic</a></li>
<li><a class="reference internal" href="#verbosity">Verbosity</a></li>
<li><a class="reference internal" href="#database">Database</a></li>
<li><a class="reference internal" href="#output">Output</a></li>
<li><a class="reference internal" href="#query">Query</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="scquery.html"
                        title="previous chapter">scquery</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="scsendjournal.html"
                        title="next chapter">scsendjournal</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/apps/scqueryqc.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
        </div>
      </div>
      </div>
    </div>
    <div class="footer">
      <div class="container">
        <div class="horizontal layout content">
        <a class="fade-in" href="https://www.gempa.de" target="_blank">
          <img class="brand" src="../_static/brands/gempa.svg"/>
        </a>
        <div class="stretched align-center fitted content">
          <div>
		  Version <b>5.5.3</b> Release
          </div>
            <div class="copyright">
              Copyright &copy; gempa GmbH, GFZ Potsdam.
            </div>
        </div>
        <a class="fade-in" href="https://www.gfz-potsdam.de" target="_blank">
          <img class="brand" src="../_static/brands/gfz.svg"/>
        </a>
        </div>
      </div>
    </div>
  </body>
</html>